webpackJsonp([4],{391:function(e,t,o){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s,l=function(){function e(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,o,r){return o&&e(t.prototype,o),r&&e(t,r),t}}(),p=o(12),u=r(p),c=o(48),y=o(47),f=(r(y),o(398)),d=(r(f),o(440)),b=r(d),m=(new b.default,(0,c.observer)(s=function(e){function t(e){a(this,t);var o=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.state={headerInfo:{},tableList:{}},o}return i(t,e),l(t,[{key:"render",value:function(){return u.default.createElement("div",{className:"content"},u.default.createElement("div",{className:"details_title"},"测试中"))}}]),t}(u.default.Component))||s);t.default=m},397:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={getTime:function(){var e=new Date,t=e.getMonth()+1,o=e.getDate();return t=t<10?"0"+t:t,o=o<10?"0"+o:o,e.getFullYear()+"-"+t+"-"+o},formatDate:function(e,t){return Date.prototype.toForm=function(){var e=this.getMonth()+1,t=this.getDate();return e=e<10?"0"+e:e,t=t<10?"0"+t:t,this.getFullYear()+"-"+e+"-"+t},Date.prototype.toFormym=function(){var e=this.getMonth()+1,t=this.getDate();return e=e<10?"0"+e:e,t=t<10?"0"+t:t,this.getFullYear()+"年"+e+"月"},"ym"==t?new Date(e).toFormym():new Date(e).toForm()},updateMoney:function(e){return e||(e=""),isNaN(Number(e.toString().replace(/,/g,"")))?0:e.toString().replace(/,/g,"")},formatCurrency:function(e){if(!e)return"0.00";e=e.toString().replace(/\$|\,/g,""),isNaN(e)&&(e="0.00");var t=e==(e=Math.abs(e));e=Math.floor(100*e+.50000000001);var o=e%100;e=Math.floor(e/100).toString(),o<10&&(o="0"+o);for(var r=0;r<Math.floor((e.length-(1+r))/3);r++)e=e.substring(0,e.length-(4*r+3))+","+e.substring(e.length-(4*r+3));return(t?"":"-")+e+"."+o},unmakeFormatCurrecy:function(e){return e.indexOf(",")>0?parseFloat(e.replace(/[^\d\.-]/g,"")):e}}},398:function(e,t,o){e.exports=o(1)(16)},415:function(e,t,o){o(416),e.exports=self.fetch.bind(self)},416:function(e,t){!function(e){"use strict";function t(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function o(e){return"string"!=typeof e&&(e=String(e)),e}function r(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return h.iterable&&(t[Symbol.iterator]=function(){return t}),t}function a(e){this.map={},e instanceof a?e.forEach(function(e,t){this.append(t,e)},this):Array.isArray(e)?e.forEach(function(e){this.append(e[0],e[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function n(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function i(e){return new Promise(function(t,o){e.onload=function(){t(e.result)},e.onerror=function(){o(e.error)}})}function s(e){var t=new FileReader,o=i(t);return t.readAsArrayBuffer(e),o}function l(e){var t=new FileReader,o=i(t);return t.readAsText(e),o}function p(e){for(var t=new Uint8Array(e),o=new Array(t.length),r=0;r<t.length;r++)o[r]=String.fromCharCode(t[r]);return o.join("")}function u(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function c(){return this.bodyUsed=!1,this._initBody=function(e){if(this._bodyInit=e,e)if("string"==typeof e)this._bodyText=e;else if(h.blob&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(h.formData&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(h.searchParams&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else if(h.arrayBuffer&&h.blob&&v(e))this._bodyArrayBuffer=u(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!h.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(e)&&!w(e))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=u(e)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):h.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},h.blob&&(this.blob=function(){var e=n(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?n(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(s)}),this.text=function(){var e=n(this);if(e)return e;if(this._bodyBlob)return l(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(p(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},h.formData&&(this.formData=function(){return this.text().then(d)}),this.json=function(){return this.text().then(JSON.parse)},this}function y(e){var t=e.toUpperCase();return O.indexOf(t)>-1?t:e}function f(e,t){t=t||{};var o=t.body;if(e instanceof f){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new a(e.headers)),this.method=e.method,this.mode=e.mode,o||null==e._bodyInit||(o=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"omit",!t.headers&&this.headers||(this.headers=new a(t.headers)),this.method=y(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&o)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(o)}function d(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var o=e.split("="),r=o.shift().replace(/\+/g," "),a=o.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(a))}}),t}function b(e){var t=new a;return e.split(/\r?\n/).forEach(function(e){var o=e.split(":"),r=o.shift().trim();if(r){var a=o.join(":").trim();t.append(r,a)}}),t}function m(e,t){t||(t={}),this.type="default",this.status="status"in t?t.status:200,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new a(t.headers),this.url=t.url||"",this._initBody(e)}if(!e.fetch){var h={searchParams:"URLSearchParams"in e,iterable:"Symbol"in e&&"iterator"in Symbol,blob:"FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in e,arrayBuffer:"ArrayBuffer"in e};if(h.arrayBuffer)var g=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],v=function(e){return e&&DataView.prototype.isPrototypeOf(e)},w=ArrayBuffer.isView||function(e){return e&&g.indexOf(Object.prototype.toString.call(e))>-1};a.prototype.append=function(e,r){e=t(e),r=o(r);var a=this.map[e];this.map[e]=a?a+","+r:r},a.prototype.delete=function(e){delete this.map[t(e)]},a.prototype.get=function(e){return e=t(e),this.has(e)?this.map[e]:null},a.prototype.has=function(e){return this.map.hasOwnProperty(t(e))},a.prototype.set=function(e,r){this.map[t(e)]=o(r)},a.prototype.forEach=function(e,t){for(var o in this.map)this.map.hasOwnProperty(o)&&e.call(t,this.map[o],o,this)},a.prototype.keys=function(){var e=[];return this.forEach(function(t,o){e.push(o)}),r(e)},a.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),r(e)},a.prototype.entries=function(){var e=[];return this.forEach(function(t,o){e.push([o,t])}),r(e)},h.iterable&&(a.prototype[Symbol.iterator]=a.prototype.entries);var O=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];f.prototype.clone=function(){return new f(this,{body:this._bodyInit})},c.call(f.prototype),c.call(m.prototype),m.prototype.clone=function(){return new m(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new a(this.headers),url:this.url})},m.error=function(){var e=new m(null,{status:0,statusText:""});return e.type="error",e};var T=[301,302,303,307,308];m.redirect=function(e,t){if(-1===T.indexOf(t))throw new RangeError("Invalid status code");return new m(null,{status:t,headers:{location:e}})},e.Headers=a,e.Request=f,e.Response=m,e.fetch=function(e,t){return new Promise(function(o,r){var a=new f(e,t),n=new XMLHttpRequest;n.onload=function(){var e={status:n.status,statusText:n.statusText,headers:b(n.getAllResponseHeaders()||"")};e.url="responseURL"in n?n.responseURL:e.headers.get("X-Request-URL");var t="response"in n?n.response:n.responseText;o(new m(t,e))},n.onerror=function(){r(new TypeError("Network request failed"))},n.ontimeout=function(){r(new TypeError("Network request failed"))},n.open(a.method,a.url,!0),"include"===a.credentials&&(n.withCredentials=!0),"responseType"in n&&h.blob&&(n.responseType="blob"),a.headers.forEach(function(e,t){n.setRequestHeader(t,e)}),n.send(void 0===a._bodyInit?null:a._bodyInit)})},e.fetch.polyfill=!0}}("undefined"!=typeof self?self:this)},440:function(e,t,o){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t,o,r){o&&Object.defineProperty(e,t,{enumerable:o.enumerable,configurable:o.configurable,writable:o.writable,value:o.initializer?o.initializer.call(r):void 0})}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t,o,r,a){var n={};return Object.keys(r).forEach(function(e){n[e]=r[e]}),n.enumerable=!!n.enumerable,n.configurable=!!n.configurable,("value"in n||n.initializer)&&(n.writable=!0),n=o.slice().reverse().reduce(function(o,r){return r(e,t,o)||o},n),a&&void 0!==n.initializer&&(n.value=n.initializer?n.initializer.call(a):void 0,n.initializer=void 0),void 0===n.initializer&&(Object.defineProperty(e,t,n),n=null),n}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s,l,p,u,c,y,f,d,b,m,h,g,v,w,O,T,S,_,j,D,N,k,E,P,B,x=function(){function e(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,o,r){return o&&e(t.prototype,o),r&&e(t,r),t}}(),I=o(96),L=o(415),C=(r(L),o(53)),U=r(C),A=o(397),z=r(A),F=o(47),R=r(F),q=o(95),M=r(q),W=(s=function(){function e(){n(this,e),this.globalStore=R.default,a(this,"money",l,this),a(this,"taxrate",p,this),a(this,"tabNav",u,this),a(this,"validateTips",c,this),a(this,"uploadOptions",y,this),a(this,"getBillTypeData",f,this),a(this,"BillTypeDataItem",d,this),a(this,"getLoanBillItemInformationData",b,this),a(this,"getLoanBillItemOtherInformation",m,this),a(this,"getNodesByDateWithTemplatePkData",h,this),a(this,"ExpenseKeyData",g,this),a(this,"checkStandardData",v,this),a(this,"UserBankData",w,this),a(this,"UserInfoData",O,this),a(this,"BillTableColumn",T,this),a(this,"queryExpenseInfoData",S,this),a(this,"queryExpenseInfoDataInformation",_,this),a(this,"getLoanBillTable",j,this),a(this,"getLoanBillModal",D,this),a(this,"getTableHead",N,this),a(this,"getLoanBodyData",k,this),a(this,"getLoanInformation",E,this),a(this,"getLoanOtherInformation",P,this),a(this,"getRowsDetail",B,this)}return x(e,[{key:"validatePhone",value:function(e,t){var o=/^1[34578]\d{9}$/;if(e)return o.test(e)?"":t||this.validateTips.phone}},{key:"validateMoney",value:function(e,t){return e=z.default.unmakeFormatCurrecy(e),/(^[1-9]([0-9]+)?(\.[0-9]{1,2})?$)|(^(0){1}$)|(^[0-9]\.[0-9]([0-9])?$)/.test(e)?"":t||this.validateTips.moeny}},{key:"validatePerson",value:function(e,t){return/^[1-9]\d*$/.test(e)?"":t||this.validateTips.personNum}},{key:"setErrorMessage",value:function(e,t,o){if(void 0!=o){if(!e||""!=o)return t}else if(!e)return t}},{key:"grepArray",value:function(e){return M.default.grep(e,function(e,t){if(""!=e)return e},!1)}},{key:"compareTime",value:function(e,t){var o="";return e&&t&&e>t&&(o=this.validateTips.compareTime),o}},{key:"getNodeRefs",value:function(e){var t=this,o=this;M.default.ajax({type:"POST",url:U.default.webreimburse.getNodeRefs,dataType:"json",data:JSON.stringify({}),contentType:"application/json",success:function(t){0==t.code?"function"==typeof e&&e(t):o.globalStore.showError(t.information?t.information:"查询失败")},error:function(e,o,r){t.globalStore.showError("数据请求失败,错误信息:"+r.toString())}})}},{key:"queryRefItem",value:function(e,t){var o=this,r=this;M.default.ajax({type:"POST",url:U.default.webreimburse.queryRefItem,dataType:"json",data:JSON.stringify(e),contentType:"application/json",success:function(e){1==e.code?"function"==typeof t&&t(e.data):r.globalStore.showError(e.information?e.information:"查询失败")},error:function(e,t,r){o.globalStore.showError("数据请求失败,错误信息:"+r.toString())}})}},{key:"getPhone",value:function(e){var t=this;M.default.ajax({type:"POST",url:U.default.webreimburse.getPhone,dataType:"json",data:JSON.stringify({}),contentType:"application/json",success:function(o){0==o.code?"function"==typeof e&&e(o):t.globalStore.showError(o.information?o.information:"查询失败")},error:function(e,o,r){t.globalStore.showError("数据请求失败,错误信息:"+r.toString())}})}},{key:"saveTravelNode",value:function(e,t){var o=this,r=this;M.default.ajax({type:"POST",url:U.default.webreimburse.saveTravelNode,dataType:"json",data:JSON.stringify(e),contentType:"application/json",success:function(e){if(0==e.code){var o={nodeType:0,nodePk:e.result.travel.pk,deleteFiles:""};r.uploadOptions=Object.assign({},o),"function"==typeof t&&t(e)}else r.globalStore.showError(e.information?e.information:"查询失败")},error:function(e,t,r){o.globalStore.showError("数据请求失败,错误信息:"+r.toString())}})}},{key:"updateTravelNode",value:function(e){var t=this,o=this;M.default.ajax({type:"POST",url:U.default.webreimburse.updateTravelNode,dataType:"json",data:e,contentType:"application/x-www-form-urlencoded",success:function(e){1==e.code||o.globalStore.showError(e.information?e.information:"查询失败")},error:function(e,o,r){t.globalStore.showError("数据请求失败,错误信息:"+r.toString())}})}},{key:"getSeat",value:function(e,t){var o=this,r=this;M.default.ajax({type:"POST",url:U.default.webreimburse.getSeat,dataType:"json",data:JSON.stringify(e),contentType:"application/json",success:function(e){0==e.code?"function"==typeof t&&t(e):r.globalStore.showError(e.information?e.information:"查询失败")},error:function(e,t,r){o.globalStore.showError("数据请求失败,错误信息:"+r.toString())}})}},{key:"saveHotelNode",value:function(e,t){var o=this,r=this;M.default.ajax({type:"POST",url:U.default.webreimburse.saveHotelNode,dataType:"json",data:JSON.stringify(e),contentType:"application/json",success:function(e){if(0==e.code){var o={nodeType:1,nodePk:e.result.hotel.pk,deleteFiles:""};r.uploadOptions=Object.assign({},o),"function"==typeof t&&t(e)}else r.globalStore.showError(e.information?e.information:"查询失败")},error:function(e,t,r){o.globalStore.showError("数据请求失败,错误信息:"+r.toString())}})}},{key:"updateHotelNode",value:function(e){var t=this,o=this;M.default.ajax({type:"POST",url:U.default.webreimburse.updateHotelNode,dataType:"json",data:e,contentType:"application/x-www-form-urlencoded",success:function(e){1==e.code||o.globalStore.showError(e.information?e.information:"查询失败")},error:function(e,o,r){t.globalStore.showError("数据请求失败,错误信息:"+r.toString())}})}},{key:"saveEatingNode",value:function(e,t){var o=this,r=this;M.default.ajax({type:"POST",url:U.default.webreimburse.saveEatingNode,dataType:"json",data:JSON.stringify(e),contentType:"application/json",success:function(e){if(0==e.code){var o={nodeType:2,nodePk:e.result.eating.pk,deleteFiles:""};r.uploadOptions=Object.assign({},o),"function"==typeof t&&t(e)}else r.globalStore.showError(e.information?e.information:"查询失败")},error:function(e,t,r){o.globalStore.showError("数据请求失败,错误信息:"+r.toString())}})}},{key:"updateEatingNode",value:function(e){var t=this,o=this;M.default.ajax({type:"POST",url:U.default.webreimburse.updateEatingNode,dataType:"json",data:e,contentType:"application/x-www-form-urlencoded",success:function(e){1==e.code||o.globalStore.showError(e.information?e.information:"查询失败")},error:function(e,o,r){t.globalStore.showError("数据请求失败,错误信息:"+r.toString())}})}},{key:"saveCommunicateNode",value:function(e,t){var o=this,r=this;M.default.ajax({type:"POST",url:U.default.webreimburse.saveCommunicateNode,dataType:"json",data:JSON.stringify(e),contentType:"application/json",success:function(e){if(0==e.code){var o={nodeType:6,nodePk:e.result.communicate.pk,deleteFiles:""};r.uploadOptions=Object.assign({},o),"function"==typeof t&&t(e)}else r.globalStore.showError(e.information?e.information:"查询失败")},error:function(e,t,r){o.globalStore.showError("数据请求失败,错误信息:"+r.toString())}})}},{key:"updateCommunicateNode",value:function(e){var t=this,o=this;M.default.ajax({type:"POST",url:U.default.webreimburse.updateCommunicateNode,dataType:"json",data:e,contentType:"application/x-www-form-urlencoded",success:function(e){1==e.code||o.globalStore.showError(e.information?e.information:"查询失败")},error:function(e,o,r){t.globalStore.showError("数据请求失败,错误信息:"+r.toString())}})}},{key:"saveOtherNode",value:function(e,t){var o=this,r=this;M.default.ajax({type:"POST",url:U.default.webreimburse.saveOtherNode,dataType:"json",data:JSON.stringify(e),contentType:"application/json",success:function(e){if(0==e.code){var o={nodeType:7,nodePk:e.result.other.pk,deleteFiles:""};r.uploadOptions=Object.assign({},o),"function"==typeof t&&t(e)}else r.globalStore.showError(e.information?e.information:"查询失败")},error:function(e,t,r){o.globalStore.showError("数据请求失败,错误信息:"+r.toString())}})}},{key:"updateOtherNode",value:function(e){var t=this,o=this;M.default.ajax({type:"POST",url:U.default.webreimburse.updateOtherNode,dataType:"json",data:e,contentType:"application/x-www-form-urlencoded",success:function(e){1==e.code||o.globalStore.showError(e.information?e.information:"查询失败")},error:function(e,o,r){t.globalStore.showError("数据请求失败,错误信息:"+r.toString())}})}},{key:"getBillType",value:function(e,t,o,r){var a=this,n=this;M.default.ajax({type:"POST",url:U.default.webreimburse.getBillType,dataType:"json",data:JSON.stringify(e),contentType:"application/json",success:function(e){0==e.code?(e.information.forEach(function(e){e.pk==t&&(n.BillTypeDataItem=Object.assign({},e))}),"function"==typeof o&&o(n.BillTypeDataItem),0!=r&&(n.getBillTypeData=Object.assign([],e.information),n.getLoanBillItemInformation({billType:n.BillTypeDataItem.billtype}))):n.globalStore.showError(e.information?e.information:"查询失败")},error:function(e,t,o){a.globalStore.showError("数据请求失败,错误信息:"+o.toString())}})}},{key:"getLoanBillItemInformation",value:function(e){var t=this,o=this;M.default.ajax({type:"POST",url:U.default.webreimburse.getLoanBillItemInformation,dataType:"json",data:JSON.stringify(e),contentType:"application/json",success:function(e){0==e.code?(o.getLoanBillItemInformationData=Object.assign([],e.information.map(function(e){return e.type=e.source_type.length>2?e.source_type.substr(1,1):0,e.typeTwo=e.source_type.length>3?e.source_type.substr(2,1):0,e})),o.getLoanBillItemOtherInformation=Object.assign({},e.otherInformation)):o.globalStore.showError(e.information?e.information:"查询失败")},error:function(e,o,r){t.globalStore.showError("数据请求失败,错误信息:"+r.toString())}})}},{key:"updateItemData",value:function(e){return"travel"==e.type?(e.fromCity_toCity=e.fromCity+"--"+e.toCity,e.date_=(e.startDate?z.default.formatDate(Number(e.startDate)):"")+"--"+(e.endDate?z.default.formatDate(Number(e.endDate)):""),e.selfDate=(e.startDate?z.default.formatDate(Number(e.startDate)):"")+"--"+(e.endDate?z.default.formatDate(Number(e.endDate)):""),e.selfMessage=e.fromCity+"-"+e.toCity+" "+e.travelWay):"hotel"==e.type?(e.startDate_endDate=(e.startDate?z.default.formatDate(e.startDate):"")+"--"+(e.endDate?z.default.formatDate(e.endDate):""),e.selfDate=(e.startDate?z.default.formatDate(Number(e.startDate)):"")+"--"+(e.endDate?z.default.formatDate(Number(e.endDate)):""),e.selfMessage=e.city+"-"+e.hotel):"eating"==e.type?(e.date_=e.date?z.default.formatDate(e.date):"",e.selfDate=e.eatingDate?z.default.formatDate(Number(e.eatingDate)):"",e.selfMessage=e.company+"-"+e.personNum+"人"):"communicate"==e.type?(e.communicateDate_=(e.communicateStart?z.default.formatDate(e.communicateStart,"ym"):"")+"--"+(e.communicateEnd?z.default.formatDate(e.communicateEnd,"ym"):""),e.selfDate=(e.communicateStart?z.default.formatDate(Number(e.communicateStart)):"")+"--"+(e.communicateEnd?z.default.formatDate(Number(e.communicateEnd)):""),e.selfMessage=e.communicateType):"other"==e.type&&(e.date_=e.otherDate?z.default.formatDate(Number(e.otherDate)):"",e.selfDate=e.otherDate?z.default.formatDate(Number(e.otherDate)):"",e.selfMessage=e.note),e}},{key:"getNodesByDateWithTemplatePk",value:function(e,t){var o=this,r=this;M.default.ajax({type:"POST",url:U.default.webreimburse.getNodesByDateWithTemplatePk,dataType:"json",data:JSON.stringify(e),contentType:"application/json",success:function(e){if(0==e.code){var o=[];for(var a in e.content){var n={date:a,data:e.content[a].map(function(e){return e=r.updateItemData(e)}),columns:[{type:"double",id:"money",label:"金额",columnClassName:"col-xs-2",formatter:{format:"0,0.00"}},{type:"enum",id:"type",label:"类型",columnClassName:"col-xs-1",data:[{key:"travel",value:"交通"},{key:"hotel",value:"住宿"},{key:"eating",value:"餐饮"},{key:"communicate",value:"通信"},{key:"other",value:"其他"}]},{type:"string",id:"selfDate",label:"日期",columnClassName:"col-xs-2"},{type:"string",id:"tagContent",label:"标签",columnClassName:"col-xs-3"},{type:"enum",id:"category",label:"来源",columnClassName:"col-xs-1",data:[{key:"ctrip_aircraft",value:"携程机票"},{key:"ctrip_aircraft_c",value:"携程机票"},{key:"ctrip_train",value:"携程火车票"},{key:"ctrip_train_c",value:"携程火车票"},{key:"mt_train",value:"美团火车票"},{key:"mt_train_c",value:"美团火车票"},{key:"dd_person_pay",value:"滴滴"},{key:"dd_company_pay",value:"滴滴"},{key:"sq_company_pay",value:"首汽"},{key:"sq_person_pay",value:"首汽"}]},{type:"string",id:"travelWay",label:"出行方式",columnClassName:"col-xs-1"},{type:"string",id:"seat",label:"坐席",columnClassName:"col-xs-1"},{type:"enum",id:"category",label:"企业支付",columnClassName:"col-xs-1",data:[{key:"ctrip_aircraft",value:"N"},{key:"ctrip_aircraft_c",value:"Y"},{key:"ctrip_train",value:"N"},{key:"ctrip_train_c",value:"Y"},{key:"mt_train",value:"N"},{key:"mt_train_c",value:"Y"},{key:"dd_person_pay",value:"N"},{key:"dd_company_pay",value:"Y"},{key:"sq_company_pay",value:"Y"},{key:"sq_person_pay",value:"N"}]}]};o.push(n)}r.getNodesByDateWithTemplatePkData=Object.assign([],o),t()}else r.globalStore.showError(e.information?e.information:"查询失败"),t()},error:function(e,r,a){o.globalStore.showError("数据请求失败,错误信息:"+a.toString()),t()}})}},{key:"getSaveExpenseKey",value:function(e){var t=this,o=this;M.default.ajax({type:"GET",url:U.default.webreimburse.getSaveExpenseKey,dataType:"json",data:JSON.stringify(e),contentType:"application/json",success:function(e){0==e.code?o.ExpenseKeyData=e.information:o.globalStore.showError(e.information?e.information:"获取数据失败")},error:function(e,o,r){t.globalStore.showError("数据请求失败,错误信息:"+r.toString())}})}},{key:"checkStandard",value:function(e,t){var o=this,r=this;M.default.ajax({type:"POST",url:U.default.webreimburse.checkStandard,dataType:"json",data:JSON.stringify(e),contentType:"application/json",success:function(e){0==e.code?(r.checkStandardData=Object.assign([],e.items),t(e.items)):r.globalStore.showError(e.information?e.information:"获取数据失败")},error:function(e,t,r){o.globalStore.showError("数据请求失败,错误信息:"+r.toString())}})}},{key:"saveNodeExpense1",value:function(e,t,o){var r=this,a=this,n=U.default.webreimburse.saveNodeExpense1;o&&(n=U.default.webreimburse.updateExpenseInfo1),M.default.ajax({type:"POST",url:n,dataType:"json",data:JSON.stringify(e),contentType:"application/json",success:function(e){0==e.code?t(0,e.expensePk):(t(1),a.globalStore.showError(e.information?e.information:"获取数据失败"))},error:function(e,o,a){t(1),r.globalStore.showError("数据请求失败,错误信息:"+a.toString())}})}},{key:"getUserBank",value:function(e){var t=this,o=this;M.default.ajax({type:"POST",url:U.default.webreimburse.getUserBank,dataType:"json",data:JSON.stringify(e),contentType:"application/json",success:function(e){0==e.code?o.UserBankData=Object.assign({},e.information):o.globalStore.showError(e.information?e.information:"获取数据失败")},error:function(e,o,r){t.globalStore.showError("数据请求失败,错误信息:"+r.toString())}})}},{key:"getUserInfo",value:function(e,t){var o=this,r=this;M.default.ajax({type:"POST",url:U.default.webreimburse.getUserInfo,dataType:"json",data:JSON.stringify(e),contentType:"application/json",success:function(e){if(e&&0==e.code){var o=[{id:e.information.deptPk,name:e.information.deptName},{id:e.information.usercode,name:e.information.userName}];r.UserInfoData=Object.assign([],o),t(o)}else r.globalStore.showError(e.information?e.information:"获取数据失败")},error:function(e,t,r){o.globalStore.showError("数据请求失败,错误信息:"+r.toString())}})}},{key:"queryExpenseInfo",value:function(e,t){var o=this,r=this;r.globalStore.showWait(),M.default.ajax({type:"POST",url:U.default.bill.queryExpenseInfo,dataType:"json",contentType:"application/json",data:JSON.stringify(e),success:function(e){r.globalStore.hideWait(),0==e.code?(o.queryExpenseInfoData=Object.assign({},e.information),o.queryExpenseInfoDataInformation=Object.assign([],e.information.information.map(function(e){return e.type=e.source_type.length>2?e.source_type.substr(1,1):0,e.typeTwo=e.source_type.length>3?e.source_type.substr(2,1):0,e})),"function"==typeof t&&t()):r.globalStore.showError(e.message?e.message:"查询失败")},error:function(e,t,a){r.globalStore.hideWait(),o.globalStore.showError("数据请求失败,错误信息:"+a.toString())}})}},{key:"loadLoanBillBodyTemplateInfo",value:function(e,t){var o=this,r=this;r.globalStore.showWait(),M.default.ajax({type:"POST",url:U.default.bill.loadLoanBillBodyTemplateInfo,dataType:"json",contentType:"application/json",data:JSON.stringify(e),success:function(e){if(r.globalStore.hideWait(),0==e.code){r.getLoanBillModal=Object.assign([],e.jk_body_meta.map(function(e){return e.type=e.source_type.length>2?e.source_type.substr(1,1):0,e.typeTwo=e.source_type.length>3?e.source_type.substr(2,1):0,e}));var o={};e.jk_body_meta.map(function(e){return o[e.source_code]="",o}),r.getLoanBillTable=Object.assign({},o);var a={},n=[],i=[],s=[],l=[],p=[];e.jk_body_meta.map(function(e){if(e.type=e.source_type.length>2?e.source_type.substr(1,1):0,"true"==e.display&&(n.push(e.source_name),i.push(e.source_code),l.push({sourceCode:e.source_code,sourceType:e.type})),s.push(e.source_code),"true"==e.display&&e.source_input){var t={};t.mustName=e.source_name,t.mustCode=e.source_code,p.push(t)}}),a.name=n,a.code=i,a.codeAll=s,a.codeObj=l,a.mustInput=p,r.getTableHead=Object.assign({},a),"function"==typeof t&&t()}else r.globalStore.showError(e.message?e.message:"查询失败")},error:function(e,t,a){r.globalStore.hideWait(),o.globalStore.showError("数据请求失败,错误信息:"+a.toString())}})}},{key:"getLoanBillNode",value:function(e,t){var o=this,r=this;this.globalStore.showWait(),M.default.ajax({type:"GET",url:U.default.bill.getLoanBillNode,dataType:"json",contentType:"application/json",data:JSON.stringify(e),success:function(e){o.globalStore.hideWait(),0==e.code?(r.getLoanBodyData=Object.assign([],e.bodyData),r.getLoanInformation=Object.assign([],e.information.map(function(e){return e.type=e.source_type.length>2?e.source_type.substr(1,1):0,e.typeTwo=e.source_type.length>3?e.source_type.substr(2,1):0,e})),r.getLoanOtherInformation=Object.assign([],e.otherInformation),"function"==typeof t&&t()):r.globalStore.showError(e.message?e.message:"查询失败")},error:function(e,t,r){o.globalStore.hideWait(),o.globalStore.showError("数据请求失败,错误信息:"+r.toString())}})}},{key:"getLoanBillBodyInfo",value:function(e,t){var o=this,r=this;this.globalStore.showWait(),M.default.ajax({type:"post",url:U.default.bill.getLoanBillBodyInfo,dataType:"json",contentType:"application/json",data:JSON.stringify(e),success:function(e){o.globalStore.hideWait(),0==e.code?(o.getRowsDetail=Object.assign([],e.jk_body),"function"==typeof t&&t()):r.globalStore.showError(e.message?e.message:"查询失败")},error:function(e,t,r){o.globalStore.hideWait(),o.globalStore.showError("数据请求失败,错误信息:"+r.toString())}})}},{key:"saveLoanBillNode",value:function(e,t){var o=this,r=this;this.globalStore.showWait(),M.default.ajax({type:"post",url:U.default.bill.saveLoanBillNode,dataType:"json",contentType:"application/json",data:JSON.stringify(e),success:function(e){o.globalStore.hideWait(),0==e.code?"function"==typeof t&&t():r.globalStore.showError(e.message?e.message:"查询失败")},error:function(e,t,r){o.globalStore.hideWait(),o.globalStore.showError("数据请求失败,错误信息:"+r.toString())}})}},{key:"addedTax",get:function(){return this.money/(1+this.taxrate)*this.taxrate}},{key:"reduceTax",get:function(){return this.money-this.money/(1+this.taxrate)*this.taxrate}},{key:"getTabNav",get:function(){return this.tabNav}},{key:"getUploadOptions",get:function(){return this.uploadOptions}}]),e}(),l=i(s.prototype,"money",[I.observable],{enumerable:!0,initializer:function(){return 0}}),p=i(s.prototype,"taxrate",[I.observable],{enumerable:!0,initializer:function(){return 1}}),i(s.prototype,"addedTax",[I.computed],Object.getOwnPropertyDescriptor(s.prototype,"addedTax"),s.prototype),i(s.prototype,"reduceTax",[I.computed],Object.getOwnPropertyDescriptor(s.prototype,"reduceTax"),s.prototype),u=i(s.prototype,"tabNav",[I.observable],{enumerable:!0,initializer:function(){return 0}}),i(s.prototype,"getTabNav",[I.computed],Object.getOwnPropertyDescriptor(s.prototype,"getTabNav"),s.prototype),c=i(s.prototype,"validateTips",[I.observable],{enumerable:!0,initializer:function(){return{moeny:"金额格式不正确",phone:"请输入正确的手机号",communicateType:"通讯费用类型不能为空",communicateDate:"记事日期不能为空",communicateStart:"费用期间起始日期不能为空",communicateEnd:"费用期间截止日期不能为空",startDate:"起始时间不能为空",endDate:"终止时间不能为空",trafficToolsValue:"交通工具不能为空",address:{start:"起始地点不能为空",end:"终止地点不能为空"},company:"公司名称不能为空",personNum:"请输入正整数",timeValue:"日期不能为空",compareTime:"起始时间须小于终止时间",city:"入住城市不能为空",hotel:"入住酒店不能为空",taxrate:"增值税发票的税率不能为空"}}}),i(s.prototype,"validatePhone",[I.action],Object.getOwnPropertyDescriptor(s.prototype,"validatePhone"),s.prototype),i(s.prototype,"validateMoney",[I.action],Object.getOwnPropertyDescriptor(s.prototype,"validateMoney"),s.prototype),i(s.prototype,"validatePerson",[I.action],Object.getOwnPropertyDescriptor(s.prototype,"validatePerson"),s.prototype),i(s.prototype,"setErrorMessage",[I.action],Object.getOwnPropertyDescriptor(s.prototype,"setErrorMessage"),s.prototype),i(s.prototype,"grepArray",[I.action],Object.getOwnPropertyDescriptor(s.prototype,"grepArray"),s.prototype),i(s.prototype,"compareTime",[I.action],Object.getOwnPropertyDescriptor(s.prototype,"compareTime"),s.prototype),i(s.prototype,"getNodeRefs",[I.action],Object.getOwnPropertyDescriptor(s.prototype,"getNodeRefs"),s.prototype),i(s.prototype,"queryRefItem",[I.action],Object.getOwnPropertyDescriptor(s.prototype,"queryRefItem"),s.prototype),i(s.prototype,"getPhone",[I.action],Object.getOwnPropertyDescriptor(s.prototype,"getPhone"),s.prototype),y=i(s.prototype,"uploadOptions",[I.observable],{enumerable:!0,initializer:function(){return{}}}),i(s.prototype,"getUploadOptions",[I.computed],Object.getOwnPropertyDescriptor(s.prototype,"getUploadOptions"),s.prototype),i(s.prototype,"saveTravelNode",[I.action],Object.getOwnPropertyDescriptor(s.prototype,"saveTravelNode"),s.prototype),i(s.prototype,"updateTravelNode",[I.action],Object.getOwnPropertyDescriptor(s.prototype,"updateTravelNode"),s.prototype),i(s.prototype,"getSeat",[I.action],Object.getOwnPropertyDescriptor(s.prototype,"getSeat"),s.prototype),i(s.prototype,"saveHotelNode",[I.action],Object.getOwnPropertyDescriptor(s.prototype,"saveHotelNode"),s.prototype),i(s.prototype,"updateHotelNode",[I.action],Object.getOwnPropertyDescriptor(s.prototype,"updateHotelNode"),s.prototype),i(s.prototype,"saveEatingNode",[I.action],Object.getOwnPropertyDescriptor(s.prototype,"saveEatingNode"),s.prototype),i(s.prototype,"updateEatingNode",[I.action],Object.getOwnPropertyDescriptor(s.prototype,"updateEatingNode"),s.prototype),i(s.prototype,"saveCommunicateNode",[I.action],Object.getOwnPropertyDescriptor(s.prototype,"saveCommunicateNode"),s.prototype),i(s.prototype,"updateCommunicateNode",[I.action],Object.getOwnPropertyDescriptor(s.prototype,"updateCommunicateNode"),s.prototype),i(s.prototype,"saveOtherNode",[I.action],Object.getOwnPropertyDescriptor(s.prototype,"saveOtherNode"),s.prototype),i(s.prototype,"updateOtherNode",[I.action],Object.getOwnPropertyDescriptor(s.prototype,"updateOtherNode"),s.prototype),f=i(s.prototype,"getBillTypeData",[I.observable],{enumerable:!0,initializer:function(){return[]}}),d=i(s.prototype,"BillTypeDataItem",[I.observable],{enumerable:!0,initializer:function(){return{}}}),i(s.prototype,"getBillType",[I.action],Object.getOwnPropertyDescriptor(s.prototype,"getBillType"),s.prototype),b=i(s.prototype,"getLoanBillItemInformationData",[I.observable],{enumerable:!0,initializer:function(){return[]}}),m=i(s.prototype,"getLoanBillItemOtherInformation",[I.observable],{enumerable:!0,initializer:function(){return{}}}),i(s.prototype,"getLoanBillItemInformation",[I.action],Object.getOwnPropertyDescriptor(s.prototype,"getLoanBillItemInformation"),s.prototype),h=i(s.prototype,"getNodesByDateWithTemplatePkData",[I.observable],{enumerable:!0,initializer:function(){return[]}}),i(s.prototype,"getNodesByDateWithTemplatePk",[I.action],Object.getOwnPropertyDescriptor(s.prototype,"getNodesByDateWithTemplatePk"),s.prototype),g=i(s.prototype,"ExpenseKeyData",[I.observable],{enumerable:!0,initializer:function(){return""}}),i(s.prototype,"getSaveExpenseKey",[I.action],Object.getOwnPropertyDescriptor(s.prototype,"getSaveExpenseKey"),s.prototype),v=i(s.prototype,"checkStandardData",[I.observable],{enumerable:!0,initializer:function(){return[]}}),i(s.prototype,"checkStandard",[I.action],Object.getOwnPropertyDescriptor(s.prototype,"checkStandard"),s.prototype),i(s.prototype,"saveNodeExpense1",[I.action],Object.getOwnPropertyDescriptor(s.prototype,"saveNodeExpense1"),s.prototype),w=i(s.prototype,"UserBankData",[I.observable],{enumerable:!0,initializer:function(){return{}}}),i(s.prototype,"getUserBank",[I.action],Object.getOwnPropertyDescriptor(s.prototype,"getUserBank"),s.prototype),O=i(s.prototype,"UserInfoData",[I.observable],{enumerable:!0,initializer:function(){return[]}}),i(s.prototype,"getUserInfo",[I.action],Object.getOwnPropertyDescriptor(s.prototype,"getUserInfo"),s.prototype),T=i(s.prototype,"BillTableColumn",[I.observable],{enumerable:!0,initializer:function(){return{travel:[{type:"string",id:"travelWay",label:"交通工具"},{type:"string",id:"fromCity_toCity",label:"路线"},{type:"string",id:"date_",label:"日期"},{type:"double",id:"money",label:"金额",formatter:{format:"0,0.00"}},{type:"string",id:"tagContent",label:"标签"},{type:"enum",id:"category",label:"来源",data:[{key:"ctrip_aircraft",value:"携程机票"},{key:"ctrip_aircraft_c",value:"携程机票"},{key:"ctrip_train",value:"携程火车票"},{key:"ctrip_train_c",value:"携程火车票"},{key:"mt_train",value:"美团火车票"},{key:"mt_train_c",value:"美团火车票"},{key:"dd_person_pay",value:"滴滴"},{key:"dd_company_pay",value:"滴滴"},{key:"sq_company_pay",value:"首汽"},{key:"sq_person_pay",value:"首汽"}]},{type:"enum",id:"category",label:"企业支付",data:[{key:"ctrip_aircraft",value:"N"},{key:"ctrip_aircraft_c",value:"Y"},{key:"ctrip_train",value:"N"},{key:"ctrip_train_c",value:"Y"},{key:"mt_train",value:"N"},{key:"mt_train_c",value:"Y"},{key:"dd_person_pay",value:"N"},{key:"dd_company_pay",value:"Y"},{key:"sq_company_pay",value:"Y"},{key:"sq_person_pay",value:"N"}]}],hotel:[{type:"string",id:"city",label:"地点"},{type:"string",id:"hotel",label:"酒店名称"},{type:"string",id:"startDate_endDate",label:"住宿日期"},{type:"double",id:"money",label:"金额",formatter:{format:"0,0.00"}},{type:"string",id:"tagContent",label:"标签"},{type:"enum",id:"category",label:"来源",data:[{key:"ctrip_inn",value:"携程酒店"},{key:"ctrip_inn_c",value:"携程酒店"}]},{type:"enum",id:"category",label:"企业支付",data:[{key:"ctrip_inn",value:"N"},{key:"ctrip_inn_c",value:"Y"}]}],eating:[{type:"string",id:"company",label:"餐饮公司"},{type:"string",id:"personNum",label:"人数"},{type:"string",id:"date_",label:"日期"},{type:"double",id:"money",label:"金额",formatter:{format:"0,0.00"}},{type:"string",id:"tagContent",label:"标签"},{type:"enum",id:"category",label:"来源",data:[{key:"red_fire",value:"红火台"},{key:"red_fire_c",value:"红火台"}]},{type:"enum",id:"category",label:"企业支付",data:[{key:"red_fire",value:"N"},{key:"red_fire_c",value:"Y"}]}],buy:[{type:"double",id:"money",label:"金额",formatter:{format:"0,0.00"}},{type:"string",id:"tagContent",label:"标签"}],pay:[{type:"sting",id:"payee",label:"收款单位"},{type:"sting",id:"payWay",label:"付款方式"},{type:"sting",id:"money",label:"金额",formatter:{format:"0,0.00"}},{type:"sting",id:"payDate_",label:"付款日期"},{type:"string",id:"tagContent",label:"标签"}],gather:[{type:"double",id:"money",label:"金额",formatter:{format:"0,0.00"}},{type:"string",id:"tagContent",label:"标签"}],sale:[{type:"double",id:"money",label:"金额",formatter:{format:"0,0.00"}},{type:"string",id:"tagContent",label:"标签"}],communicate:[{type:"string",id:"communicateType",label:"通信类型"},{type:"string",id:"phoneNumber",label:"电话号码"},{type:"string",id:"communicateDate_",label:"费用期间"},{type:"double",id:"money",label:"金额",formatter:{format:"0,0.00"}},{type:"string",id:"tagContent",label:"标签"},{type:"enum",id:"category",label:"来源",data:[{key:"einvoice",value:"电子发票"}]},{type:"enum",id:"category",label:"企业支付",data:[{key:"einvoice",value:"N"}]}],other:[{type:"string",id:"note",label:"说明"},{type:"string",id:"date_",label:"日期"},{type:"double",id:"money",label:"金额",formatter:{format:"0,0.00"}},{type:"string",id:"tagContent",label:"标签"}]}}}),S=i(s.prototype,"queryExpenseInfoData",[I.observable],{enumerable:!0,initializer:function(){return{}}}),_=i(s.prototype,"queryExpenseInfoDataInformation",[I.observable],{enumerable:!0,initializer:function(){return[]}}),i(s.prototype,"queryExpenseInfo",[I.action],Object.getOwnPropertyDescriptor(s.prototype,"queryExpenseInfo"),s.prototype),j=i(s.prototype,"getLoanBillTable",[I.observable],{enumerable:!0,initializer:function(){return{}}}),D=i(s.prototype,"getLoanBillModal",[I.observable],{enumerable:!0,initializer:function(){return[]}}),N=i(s.prototype,"getTableHead",[I.observable],{enumerable:!0,initializer:function(){return{}}}),i(s.prototype,"loadLoanBillBodyTemplateInfo",[I.action],Object.getOwnPropertyDescriptor(s.prototype,"loadLoanBillBodyTemplateInfo"),s.prototype),k=i(s.prototype,"getLoanBodyData",[I.observable],{enumerable:!0,initializer:function(){return[]}}),E=i(s.prototype,"getLoanInformation",[I.observable],{enumerable:!0,initializer:function(){return[]}}),P=i(s.prototype,"getLoanOtherInformation",[I.observable],{enumerable:!0,initializer:function(){return[]}}),i(s.prototype,"getLoanBillNode",[I.action],Object.getOwnPropertyDescriptor(s.prototype,"getLoanBillNode"),s.prototype),B=i(s.prototype,"getRowsDetail",[I.observable],{enumerable:!0,initializer:function(){return[]}}),i(s.prototype,"getLoanBillBodyInfo",[I.action],Object.getOwnPropertyDescriptor(s.prototype,"getLoanBillBodyInfo"),s.prototype),i(s.prototype,"saveLoanBillNode",[I.action],Object.getOwnPropertyDescriptor(s.prototype,"saveLoanBillNode"),s.prototype),s);t.default=W}});