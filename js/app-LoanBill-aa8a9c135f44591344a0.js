webpackJsonp([1],{390:function(e,t,o){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l,s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=function(){function e(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,o,r){return o&&e(t.prototype,o),r&&e(t,r),t}}(),p=o(12),c=r(p),d=o(48),f=o(47),y=r(f),m=o(392),b=r(m),h=o(394),g=r(h),v=o(405),_=r(v),w=o(406),S=r(w),E=new g.default,T=(0,d.observer)(l=function(e){function t(e){a(this,t);var o=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.getHeadInfo=function(){E.getLoanBillItemInformation({billType:o.props.params.type}),E.loadLoanBillBodyTemplateInfo({billTypePk:o.props.params.billTypePk})},o.setStateData=function(e,t){o.setState(e,function(){"function"==typeof t&&t()})},o.submit=function(){var e=o,t=e.state.headerInfo,r=e.state.tableList,a=E.getTableHead.codeAll,n={},i=[];if(b.default.forEach(E.getLoanBillItemInformationData,function(e,o){n[e.source_code]=t[e.source_code],e.source_input&&(t[e.source_code]&&""!=t[e.source_code]||i.push(e.source_name)),"object"==s(n[e.source_code])&&(n[e.source_code]=t[e.source_code][0].id+","+t[e.source_code][0].code)}),b.default.forEach(r,function(e,t){b.default.forEach(a,function(t,o){if("object"==s(e[t])){var r=e[t][0].id+","+e[t][0].code;e[t]=r}})}),"{}"==JSON.stringify(r)&&i.push("表体明细"),""!=o.state.errorTips&&i.push("金额格式不正确或"),i.length>0){var l="";return b.default.forEach(i,function(e,t){0==t?l=e:l+="、"+e}),l+="字段不可为空",void y.default.showError(l)}var u={billTypeInformation:{billType:e.props.params.billTypePk},information:n,bodyInformation:{jk_body:r},otherInformation:E.getLoanBillItemOtherInformation,applyBillInformation:{sqdpks:[{},{}]}};E.saveLoanBillNode(u,function(){y.default.hideAlert();y.default.showTipsModal("保存成功！","small","",function(){})})},o.exit=function(){},o.state={headerInfo:{},tableList:{}},o}return i(t,e),u(t,[{key:"componentWillMount",value:function(){this.getHeadInfo()}},{key:"render",value:function(){return c.default.createElement("div",{className:"content"},c.default.createElement("div",{className:"details_title"},"测试中"),c.default.createElement(_.default,{headerInfo:E.getLoanBillItemInformationData,setStateData:this.setStateData}),c.default.createElement(S.default,{tableInfo:E.getLoanBillModal,tableList:E.getLoanBillTable,tableHead:E.getTableHead,setStateData:this.setStateData}),c.default.createElement("div",{className:"btn-bottom-fixed"},c.default.createElement("div",{className:"row btn-bottom"},c.default.createElement("div",{className:"col-sm-12"},c.default.createElement("button",{type:"button",className:"btn btn-primary fr",onClick:this.submit},"确定"),c.default.createElement("button",{type:"button",className:"btn btn-default fr",onClick:this.exit},"取消")))))}}]),t}(c.default.Component))||l;t.default=T},391:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={getTime:function(){var e=new Date,t=e.getMonth()+1,o=e.getDate();return t=t<10?"0"+t:t,o=o<10?"0"+o:o,e.getFullYear()+"-"+t+"-"+o},formatDate:function(e,t){return Date.prototype.toForm=function(){var e=this.getMonth()+1,t=this.getDate();return e=e<10?"0"+e:e,t=t<10?"0"+t:t,this.getFullYear()+"-"+e+"-"+t},Date.prototype.toFormym=function(){var e=this.getMonth()+1,t=this.getDate();return e=e<10?"0"+e:e,t=t<10?"0"+t:t,this.getFullYear()+"年"+e+"月"},"ym"==t?new Date(e).toFormym():new Date(e).toForm()},updateMoney:function(e){return e||(e=""),isNaN(Number(e.toString().replace(/,/g,"")))?0:e.toString().replace(/,/g,"")},formatCurrency:function(e){if(!e)return"0.00";e=e.toString().replace(/\$|\,/g,""),isNaN(e)&&(e="0.00");var t=e==(e=Math.abs(e));e=Math.floor(100*e+.50000000001);var o=e%100;e=Math.floor(e/100).toString(),o<10&&(o="0"+o);for(var r=0;r<Math.floor((e.length-(1+r))/3);r++)e=e.substring(0,e.length-(4*r+3))+","+e.substring(e.length-(4*r+3));return(t?"":"-")+e+"."+o},unmakeFormatCurrecy:function(e){return e.indexOf(",")>0?parseFloat(e.replace(/[^\d\.-]/g,"")):e}}},392:function(e,t,o){e.exports=o(1)(16)},394:function(e,t,o){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t,o,r){o&&Object.defineProperty(e,t,{enumerable:o.enumerable,configurable:o.configurable,writable:o.writable,value:o.initializer?o.initializer.call(r):void 0})}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t,o,r,a){var n={};return Object.keys(r).forEach(function(e){n[e]=r[e]}),n.enumerable=!!n.enumerable,n.configurable=!!n.configurable,("value"in n||n.initializer)&&(n.writable=!0),n=o.slice().reverse().reduce(function(o,r){return r(e,t,o)||o},n),a&&void 0!==n.initializer&&(n.value=n.initializer?n.initializer.call(a):void 0,n.initializer=void 0),void 0===n.initializer&&(Object.defineProperty(e,t,n),n=null),n}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l,s,u,p,c,d,f,y,m,b,h,g,v,_,w,S,E,T,O,D,k,j,N,I,P,x=function(){function e(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,o,r){return o&&e(t.prototype,o),r&&e(t,r),t}}(),B=o(96),C=o(395),L=(r(C),o(53)),M=r(L),U=o(391),A=r(U),H=o(47),R=r(H),F=o(95),z=r(F),q=(l=function(){function e(){n(this,e),this.globalStore=R.default,a(this,"money",s,this),a(this,"taxrate",u,this),a(this,"tabNav",p,this),a(this,"validateTips",c,this),a(this,"uploadOptions",d,this),a(this,"getBillTypeData",f,this),a(this,"BillTypeDataItem",y,this),a(this,"getLoanBillItemInformationData",m,this),a(this,"getLoanBillItemOtherInformation",b,this),a(this,"getNodesByDateWithTemplatePkData",h,this),a(this,"ExpenseKeyData",g,this),a(this,"checkStandardData",v,this),a(this,"UserBankData",_,this),a(this,"UserInfoData",w,this),a(this,"BillTableColumn",S,this),a(this,"queryExpenseInfoData",E,this),a(this,"queryExpenseInfoDataInformation",T,this),a(this,"getLoanBillTable",O,this),a(this,"getLoanBillModal",D,this),a(this,"getTableHead",k,this),a(this,"getLoanBodyData",j,this),a(this,"getLoanInformation",N,this),a(this,"getLoanOtherInformation",I,this),a(this,"getRowsDetail",P,this)}return x(e,[{key:"validatePhone",value:function(e,t){var o=/^1[34578]\d{9}$/;if(e)return o.test(e)?"":t||this.validateTips.phone}},{key:"validateMoney",value:function(e,t){return e=A.default.unmakeFormatCurrecy(e),/(^[1-9]([0-9]+)?(\.[0-9]{1,2})?$)|(^(0){1}$)|(^[0-9]\.[0-9]([0-9])?$)/.test(e)?"":t||this.validateTips.moeny}},{key:"validatePerson",value:function(e,t){return/^[1-9]\d*$/.test(e)?"":t||this.validateTips.personNum}},{key:"setErrorMessage",value:function(e,t,o){if(void 0!=o){if(!e||""!=o)return t}else if(!e)return t}},{key:"grepArray",value:function(e){return z.default.grep(e,function(e,t){if(""!=e)return e},!1)}},{key:"compareTime",value:function(e,t){var o="";return e&&t&&e>t&&(o=this.validateTips.compareTime),o}},{key:"getNodeRefs",value:function(e){var t=this,o=this;z.default.ajax({type:"POST",url:M.default.webreimburse.getNodeRefs,dataType:"json",data:JSON.stringify({}),contentType:"application/json",success:function(t){0==t.code?"function"==typeof e&&e(t):o.globalStore.showError(t.information?t.information:"查询失败")},error:function(e,o,r){t.globalStore.showError("数据请求失败,错误信息:"+r.toString())}})}},{key:"queryRefItem",value:function(e,t){var o=this,r=this;z.default.ajax({type:"POST",url:M.default.webreimburse.queryRefItem,dataType:"json",data:JSON.stringify(e),contentType:"application/json",success:function(e){1==e.code?"function"==typeof t&&t(e.data):r.globalStore.showError(e.information?e.information:"查询失败")},error:function(e,t,r){o.globalStore.showError("数据请求失败,错误信息:"+r.toString())}})}},{key:"getPhone",value:function(e){var t=this;z.default.ajax({type:"POST",url:M.default.webreimburse.getPhone,dataType:"json",data:JSON.stringify({}),contentType:"application/json",success:function(o){0==o.code?"function"==typeof e&&e(o):t.globalStore.showError(o.information?o.information:"查询失败")},error:function(e,o,r){t.globalStore.showError("数据请求失败,错误信息:"+r.toString())}})}},{key:"saveTravelNode",value:function(e,t){var o=this,r=this;z.default.ajax({type:"POST",url:M.default.webreimburse.saveTravelNode,dataType:"json",data:JSON.stringify(e),contentType:"application/json",success:function(e){if(0==e.code){var o={nodeType:0,nodePk:e.result.travel.pk,deleteFiles:""};r.uploadOptions=Object.assign({},o),"function"==typeof t&&t(e)}else r.globalStore.showError(e.information?e.information:"查询失败")},error:function(e,t,r){o.globalStore.showError("数据请求失败,错误信息:"+r.toString())}})}},{key:"updateTravelNode",value:function(e){var t=this,o=this;z.default.ajax({type:"POST",url:M.default.webreimburse.updateTravelNode,dataType:"json",data:e,contentType:"application/x-www-form-urlencoded",success:function(e){1==e.code||o.globalStore.showError(e.information?e.information:"查询失败")},error:function(e,o,r){t.globalStore.showError("数据请求失败,错误信息:"+r.toString())}})}},{key:"getSeat",value:function(e,t){var o=this,r=this;z.default.ajax({type:"POST",url:M.default.webreimburse.getSeat,dataType:"json",data:JSON.stringify(e),contentType:"application/json",success:function(e){0==e.code?"function"==typeof t&&t(e):r.globalStore.showError(e.information?e.information:"查询失败")},error:function(e,t,r){o.globalStore.showError("数据请求失败,错误信息:"+r.toString())}})}},{key:"saveHotelNode",value:function(e,t){var o=this,r=this;z.default.ajax({type:"POST",url:M.default.webreimburse.saveHotelNode,dataType:"json",data:JSON.stringify(e),contentType:"application/json",success:function(e){if(0==e.code){var o={nodeType:1,nodePk:e.result.hotel.pk,deleteFiles:""};r.uploadOptions=Object.assign({},o),"function"==typeof t&&t(e)}else r.globalStore.showError(e.information?e.information:"查询失败")},error:function(e,t,r){o.globalStore.showError("数据请求失败,错误信息:"+r.toString())}})}},{key:"updateHotelNode",value:function(e){var t=this,o=this;z.default.ajax({type:"POST",url:M.default.webreimburse.updateHotelNode,dataType:"json",data:e,contentType:"application/x-www-form-urlencoded",success:function(e){1==e.code||o.globalStore.showError(e.information?e.information:"查询失败")},error:function(e,o,r){t.globalStore.showError("数据请求失败,错误信息:"+r.toString())}})}},{key:"saveEatingNode",value:function(e,t){var o=this,r=this;z.default.ajax({type:"POST",url:M.default.webreimburse.saveEatingNode,dataType:"json",data:JSON.stringify(e),contentType:"application/json",success:function(e){if(0==e.code){var o={nodeType:2,nodePk:e.result.eating.pk,deleteFiles:""};r.uploadOptions=Object.assign({},o),"function"==typeof t&&t(e)}else r.globalStore.showError(e.information?e.information:"查询失败")},error:function(e,t,r){o.globalStore.showError("数据请求失败,错误信息:"+r.toString())}})}},{key:"updateEatingNode",value:function(e){var t=this,o=this;z.default.ajax({type:"POST",url:M.default.webreimburse.updateEatingNode,dataType:"json",data:e,contentType:"application/x-www-form-urlencoded",success:function(e){1==e.code||o.globalStore.showError(e.information?e.information:"查询失败")},error:function(e,o,r){t.globalStore.showError("数据请求失败,错误信息:"+r.toString())}})}},{key:"saveCommunicateNode",value:function(e,t){var o=this,r=this;z.default.ajax({type:"POST",url:M.default.webreimburse.saveCommunicateNode,dataType:"json",data:JSON.stringify(e),contentType:"application/json",success:function(e){if(0==e.code){var o={nodeType:6,nodePk:e.result.communicate.pk,deleteFiles:""};r.uploadOptions=Object.assign({},o),"function"==typeof t&&t(e)}else r.globalStore.showError(e.information?e.information:"查询失败")},error:function(e,t,r){o.globalStore.showError("数据请求失败,错误信息:"+r.toString())}})}},{key:"updateCommunicateNode",value:function(e){var t=this,o=this;z.default.ajax({type:"POST",url:M.default.webreimburse.updateCommunicateNode,dataType:"json",data:e,contentType:"application/x-www-form-urlencoded",success:function(e){1==e.code||o.globalStore.showError(e.information?e.information:"查询失败")},error:function(e,o,r){t.globalStore.showError("数据请求失败,错误信息:"+r.toString())}})}},{key:"saveOtherNode",value:function(e,t){var o=this,r=this;z.default.ajax({type:"POST",url:M.default.webreimburse.saveOtherNode,dataType:"json",data:JSON.stringify(e),contentType:"application/json",success:function(e){if(0==e.code){var o={nodeType:7,nodePk:e.result.other.pk,deleteFiles:""};r.uploadOptions=Object.assign({},o),"function"==typeof t&&t(e)}else r.globalStore.showError(e.information?e.information:"查询失败")},error:function(e,t,r){o.globalStore.showError("数据请求失败,错误信息:"+r.toString())}})}},{key:"updateOtherNode",value:function(e){var t=this,o=this;z.default.ajax({type:"POST",url:M.default.webreimburse.updateOtherNode,dataType:"json",data:e,contentType:"application/x-www-form-urlencoded",success:function(e){1==e.code||o.globalStore.showError(e.information?e.information:"查询失败")},error:function(e,o,r){t.globalStore.showError("数据请求失败,错误信息:"+r.toString())}})}},{key:"getBillType",value:function(e,t,o,r){var a=this,n=this;z.default.ajax({type:"POST",url:M.default.webreimburse.getBillType,dataType:"json",data:JSON.stringify(e),contentType:"application/json",success:function(e){0==e.code?(e.information.forEach(function(e){e.pk==t&&(n.BillTypeDataItem=Object.assign({},e))}),"function"==typeof o&&o(n.BillTypeDataItem),0!=r&&(n.getBillTypeData=Object.assign([],e.information),n.getLoanBillItemInformation({billType:n.BillTypeDataItem.billtype}))):n.globalStore.showError(e.information?e.information:"查询失败")},error:function(e,t,o){a.globalStore.showError("数据请求失败,错误信息:"+o.toString())}})}},{key:"getLoanBillItemInformation",value:function(e){var t=this,o=this;z.default.ajax({type:"POST",url:M.default.webreimburse.getLoanBillItemInformation,dataType:"json",data:JSON.stringify(e),contentType:"application/json",success:function(e){0==e.code?(o.getLoanBillItemInformationData=Object.assign([],e.information.map(function(e){return e.type=e.source_type.length>2?e.source_type.substr(1,1):0,e.typeTwo=e.source_type.length>3?e.source_type.substr(2,1):0,e})),o.getLoanBillItemOtherInformation=Object.assign({},e.otherInformation)):o.globalStore.showError(e.information?e.information:"查询失败")},error:function(e,o,r){t.globalStore.showError("数据请求失败,错误信息:"+r.toString())}})}},{key:"updateItemData",value:function(e){return"travel"==e.type?(e.fromCity_toCity=e.fromCity+"--"+e.toCity,e.date_=(e.startDate?A.default.formatDate(Number(e.startDate)):"")+"--"+(e.endDate?A.default.formatDate(Number(e.endDate)):""),e.selfDate=(e.startDate?A.default.formatDate(Number(e.startDate)):"")+"--"+(e.endDate?A.default.formatDate(Number(e.endDate)):""),e.selfMessage=e.fromCity+"-"+e.toCity+" "+e.travelWay):"hotel"==e.type?(e.startDate_endDate=(e.startDate?A.default.formatDate(e.startDate):"")+"--"+(e.endDate?A.default.formatDate(e.endDate):""),e.selfDate=(e.startDate?A.default.formatDate(Number(e.startDate)):"")+"--"+(e.endDate?A.default.formatDate(Number(e.endDate)):""),e.selfMessage=e.city+"-"+e.hotel):"eating"==e.type?(e.date_=e.date?A.default.formatDate(e.date):"",e.selfDate=e.eatingDate?A.default.formatDate(Number(e.eatingDate)):"",e.selfMessage=e.company+"-"+e.personNum+"人"):"communicate"==e.type?(e.communicateDate_=(e.communicateStart?A.default.formatDate(e.communicateStart,"ym"):"")+"--"+(e.communicateEnd?A.default.formatDate(e.communicateEnd,"ym"):""),e.selfDate=(e.communicateStart?A.default.formatDate(Number(e.communicateStart)):"")+"--"+(e.communicateEnd?A.default.formatDate(Number(e.communicateEnd)):""),e.selfMessage=e.communicateType):"other"==e.type&&(e.date_=e.otherDate?A.default.formatDate(Number(e.otherDate)):"",e.selfDate=e.otherDate?A.default.formatDate(Number(e.otherDate)):"",e.selfMessage=e.note),e}},{key:"getNodesByDateWithTemplatePk",value:function(e,t){var o=this,r=this;z.default.ajax({type:"POST",url:M.default.webreimburse.getNodesByDateWithTemplatePk,dataType:"json",data:JSON.stringify(e),contentType:"application/json",success:function(e){if(0==e.code){var o=[];for(var a in e.content){var n={date:a,data:e.content[a].map(function(e){return e=r.updateItemData(e)}),columns:[{type:"double",id:"money",label:"金额",columnClassName:"col-xs-2",formatter:{format:"0,0.00"}},{type:"enum",id:"type",label:"类型",columnClassName:"col-xs-1",data:[{key:"travel",value:"交通"},{key:"hotel",value:"住宿"},{key:"eating",value:"餐饮"},{key:"communicate",value:"通信"},{key:"other",value:"其他"}]},{type:"string",id:"selfDate",label:"日期",columnClassName:"col-xs-2"},{type:"string",id:"tagContent",label:"标签",columnClassName:"col-xs-3"},{type:"enum",id:"category",label:"来源",columnClassName:"col-xs-1",data:[{key:"ctrip_aircraft",value:"携程机票"},{key:"ctrip_aircraft_c",value:"携程机票"},{key:"ctrip_train",value:"携程火车票"},{key:"ctrip_train_c",value:"携程火车票"},{key:"mt_train",value:"美团火车票"},{key:"mt_train_c",value:"美团火车票"},{key:"dd_person_pay",value:"滴滴"},{key:"dd_company_pay",value:"滴滴"},{key:"sq_company_pay",value:"首汽"},{key:"sq_person_pay",value:"首汽"}]},{type:"string",id:"travelWay",label:"出行方式",columnClassName:"col-xs-1"},{type:"string",id:"seat",label:"坐席",columnClassName:"col-xs-1"},{type:"enum",id:"category",label:"企业支付",columnClassName:"col-xs-1",data:[{key:"ctrip_aircraft",value:"N"},{key:"ctrip_aircraft_c",value:"Y"},{key:"ctrip_train",value:"N"},{key:"ctrip_train_c",value:"Y"},{key:"mt_train",value:"N"},{key:"mt_train_c",value:"Y"},{key:"dd_person_pay",value:"N"},{key:"dd_company_pay",value:"Y"},{key:"sq_company_pay",value:"Y"},{key:"sq_person_pay",value:"N"}]}]};o.push(n)}r.getNodesByDateWithTemplatePkData=Object.assign([],o),t()}else r.globalStore.showError(e.information?e.information:"查询失败"),t()},error:function(e,r,a){o.globalStore.showError("数据请求失败,错误信息:"+a.toString()),t()}})}},{key:"getSaveExpenseKey",value:function(e){var t=this,o=this;z.default.ajax({type:"GET",url:M.default.webreimburse.getSaveExpenseKey,dataType:"json",data:JSON.stringify(e),contentType:"application/json",success:function(e){0==e.code?o.ExpenseKeyData=e.information:o.globalStore.showError(e.information?e.information:"获取数据失败")},error:function(e,o,r){t.globalStore.showError("数据请求失败,错误信息:"+r.toString())}})}},{key:"checkStandard",value:function(e,t){var o=this,r=this;z.default.ajax({type:"POST",url:M.default.webreimburse.checkStandard,dataType:"json",data:JSON.stringify(e),contentType:"application/json",success:function(e){0==e.code?(r.checkStandardData=Object.assign([],e.items),t(e.items)):r.globalStore.showError(e.information?e.information:"获取数据失败")},error:function(e,t,r){o.globalStore.showError("数据请求失败,错误信息:"+r.toString())}})}},{key:"saveNodeExpense1",value:function(e,t,o){var r=this,a=this,n=M.default.webreimburse.saveNodeExpense1;o&&(n=M.default.webreimburse.updateExpenseInfo1),z.default.ajax({type:"POST",url:n,dataType:"json",data:JSON.stringify(e),contentType:"application/json",success:function(e){0==e.code?t(0,e.expensePk):(t(1),a.globalStore.showError(e.information?e.information:"获取数据失败"))},error:function(e,o,a){t(1),r.globalStore.showError("数据请求失败,错误信息:"+a.toString())}})}},{key:"getUserBank",value:function(e){var t=this,o=this;z.default.ajax({type:"POST",url:M.default.webreimburse.getUserBank,dataType:"json",data:JSON.stringify(e),contentType:"application/json",success:function(e){0==e.code?o.UserBankData=Object.assign({},e.information):o.globalStore.showError(e.information?e.information:"获取数据失败")},error:function(e,o,r){t.globalStore.showError("数据请求失败,错误信息:"+r.toString())}})}},{key:"getUserInfo",value:function(e,t){var o=this,r=this;z.default.ajax({type:"POST",url:M.default.webreimburse.getUserInfo,dataType:"json",data:JSON.stringify(e),contentType:"application/json",success:function(e){if(e&&0==e.code){var o=[{id:e.information.deptPk,name:e.information.deptName},{id:e.information.usercode,name:e.information.userName}];r.UserInfoData=Object.assign([],o),t(o)}else r.globalStore.showError(e.information?e.information:"获取数据失败")},error:function(e,t,r){o.globalStore.showError("数据请求失败,错误信息:"+r.toString())}})}},{key:"queryExpenseInfo",value:function(e,t){var o=this,r=this;r.globalStore.showWait(),z.default.ajax({type:"POST",url:M.default.bill.queryExpenseInfo,dataType:"json",contentType:"application/json",data:JSON.stringify(e),success:function(e){r.globalStore.hideWait(),0==e.code?(o.queryExpenseInfoData=Object.assign({},e.information),o.queryExpenseInfoDataInformation=Object.assign([],e.information.information.map(function(e){return e.type=e.source_type.length>2?e.source_type.substr(1,1):0,e.typeTwo=e.source_type.length>3?e.source_type.substr(2,1):0,e})),"function"==typeof t&&t()):r.globalStore.showError(e.message?e.message:"查询失败")},error:function(e,t,a){r.globalStore.hideWait(),o.globalStore.showError("数据请求失败,错误信息:"+a.toString())}})}},{key:"loadLoanBillBodyTemplateInfo",value:function(e,t){var o=this,r=this;r.globalStore.showWait(),z.default.ajax({type:"POST",url:M.default.bill.loadLoanBillBodyTemplateInfo,dataType:"json",contentType:"application/json",data:JSON.stringify(e),success:function(e){if(r.globalStore.hideWait(),0==e.code){r.getLoanBillModal=Object.assign([],e.jk_body_meta.map(function(e){return e.type=e.source_type.length>2?e.source_type.substr(1,1):0,e.typeTwo=e.source_type.length>3?e.source_type.substr(2,1):0,e}));var o={};e.jk_body_meta.map(function(e){return o[e.source_code]="",o}),r.getLoanBillTable=Object.assign({},o);var a={},n=[],i=[],l=[],s=[],u=[];e.jk_body_meta.map(function(e){if(e.type=e.source_type.length>2?e.source_type.substr(1,1):0,"true"==e.display&&(n.push(e.source_name),i.push(e.source_code),s.push({sourceCode:e.source_code,sourceType:e.type})),l.push(e.source_code),"true"==e.display&&e.source_input){var t={};t.mustName=e.source_name,t.mustCode=e.source_code,u.push(t)}}),a.name=n,a.code=i,a.codeAll=l,a.codeObj=s,a.mustInput=u,r.getTableHead=Object.assign({},a),"function"==typeof t&&t()}else r.globalStore.showError(e.message?e.message:"查询失败")},error:function(e,t,a){r.globalStore.hideWait(),o.globalStore.showError("数据请求失败,错误信息:"+a.toString())}})}},{key:"getLoanBillNode",value:function(e,t){var o=this,r=this;this.globalStore.showWait(),z.default.ajax({type:"GET",url:M.default.bill.getLoanBillNode,dataType:"json",contentType:"application/json",data:JSON.stringify(e),success:function(e){o.globalStore.hideWait(),0==e.code?(r.getLoanBodyData=Object.assign([],e.bodyData),r.getLoanInformation=Object.assign([],e.information.map(function(e){return e.type=e.source_type.length>2?e.source_type.substr(1,1):0,e.typeTwo=e.source_type.length>3?e.source_type.substr(2,1):0,e})),r.getLoanOtherInformation=Object.assign([],e.otherInformation),"function"==typeof t&&t()):r.globalStore.showError(e.message?e.message:"查询失败")},error:function(e,t,r){o.globalStore.hideWait(),o.globalStore.showError("数据请求失败,错误信息:"+r.toString())}})}},{key:"getLoanBillBodyInfo",value:function(e,t){var o=this,r=this;this.globalStore.showWait(),z.default.ajax({type:"post",url:M.default.bill.getLoanBillBodyInfo,dataType:"json",contentType:"application/json",data:JSON.stringify(e),success:function(e){o.globalStore.hideWait(),0==e.code?(o.getRowsDetail=Object.assign([],e.jk_body),"function"==typeof t&&t()):r.globalStore.showError(e.message?e.message:"查询失败")},error:function(e,t,r){o.globalStore.hideWait(),o.globalStore.showError("数据请求失败,错误信息:"+r.toString())}})}},{key:"saveLoanBillNode",value:function(e,t){var o=this,r=this;this.globalStore.showWait(),z.default.ajax({type:"post",url:M.default.bill.saveLoanBillNode,dataType:"json",contentType:"application/json",data:JSON.stringify(e),success:function(e){o.globalStore.hideWait(),0==e.code?"function"==typeof t&&t():r.globalStore.showError(e.message?e.message:"查询失败")},error:function(e,t,r){o.globalStore.hideWait(),o.globalStore.showError("数据请求失败,错误信息:"+r.toString())}})}},{key:"addedTax",get:function(){return this.money/(1+this.taxrate)*this.taxrate}},{key:"reduceTax",get:function(){return this.money-this.money/(1+this.taxrate)*this.taxrate}},{key:"getTabNav",get:function(){return this.tabNav}},{key:"getUploadOptions",get:function(){return this.uploadOptions}}]),e}(),s=i(l.prototype,"money",[B.observable],{enumerable:!0,initializer:function(){return 0}}),u=i(l.prototype,"taxrate",[B.observable],{enumerable:!0,initializer:function(){return 1}}),i(l.prototype,"addedTax",[B.computed],Object.getOwnPropertyDescriptor(l.prototype,"addedTax"),l.prototype),i(l.prototype,"reduceTax",[B.computed],Object.getOwnPropertyDescriptor(l.prototype,"reduceTax"),l.prototype),p=i(l.prototype,"tabNav",[B.observable],{enumerable:!0,initializer:function(){return 0}}),i(l.prototype,"getTabNav",[B.computed],Object.getOwnPropertyDescriptor(l.prototype,"getTabNav"),l.prototype),c=i(l.prototype,"validateTips",[B.observable],{enumerable:!0,initializer:function(){return{moeny:"金额格式不正确",phone:"请输入正确的手机号",communicateType:"通讯费用类型不能为空",communicateDate:"记事日期不能为空",communicateStart:"费用期间起始日期不能为空",communicateEnd:"费用期间截止日期不能为空",startDate:"起始时间不能为空",endDate:"终止时间不能为空",trafficToolsValue:"交通工具不能为空",address:{start:"起始地点不能为空",end:"终止地点不能为空"},company:"公司名称不能为空",personNum:"请输入正整数",timeValue:"日期不能为空",compareTime:"起始时间须小于终止时间",city:"入住城市不能为空",hotel:"入住酒店不能为空",taxrate:"增值税发票的税率不能为空"}}}),i(l.prototype,"validatePhone",[B.action],Object.getOwnPropertyDescriptor(l.prototype,"validatePhone"),l.prototype),i(l.prototype,"validateMoney",[B.action],Object.getOwnPropertyDescriptor(l.prototype,"validateMoney"),l.prototype),i(l.prototype,"validatePerson",[B.action],Object.getOwnPropertyDescriptor(l.prototype,"validatePerson"),l.prototype),i(l.prototype,"setErrorMessage",[B.action],Object.getOwnPropertyDescriptor(l.prototype,"setErrorMessage"),l.prototype),i(l.prototype,"grepArray",[B.action],Object.getOwnPropertyDescriptor(l.prototype,"grepArray"),l.prototype),i(l.prototype,"compareTime",[B.action],Object.getOwnPropertyDescriptor(l.prototype,"compareTime"),l.prototype),i(l.prototype,"getNodeRefs",[B.action],Object.getOwnPropertyDescriptor(l.prototype,"getNodeRefs"),l.prototype),i(l.prototype,"queryRefItem",[B.action],Object.getOwnPropertyDescriptor(l.prototype,"queryRefItem"),l.prototype),i(l.prototype,"getPhone",[B.action],Object.getOwnPropertyDescriptor(l.prototype,"getPhone"),l.prototype),d=i(l.prototype,"uploadOptions",[B.observable],{enumerable:!0,initializer:function(){return{}}}),i(l.prototype,"getUploadOptions",[B.computed],Object.getOwnPropertyDescriptor(l.prototype,"getUploadOptions"),l.prototype),i(l.prototype,"saveTravelNode",[B.action],Object.getOwnPropertyDescriptor(l.prototype,"saveTravelNode"),l.prototype),i(l.prototype,"updateTravelNode",[B.action],Object.getOwnPropertyDescriptor(l.prototype,"updateTravelNode"),l.prototype),i(l.prototype,"getSeat",[B.action],Object.getOwnPropertyDescriptor(l.prototype,"getSeat"),l.prototype),i(l.prototype,"saveHotelNode",[B.action],Object.getOwnPropertyDescriptor(l.prototype,"saveHotelNode"),l.prototype),i(l.prototype,"updateHotelNode",[B.action],Object.getOwnPropertyDescriptor(l.prototype,"updateHotelNode"),l.prototype),i(l.prototype,"saveEatingNode",[B.action],Object.getOwnPropertyDescriptor(l.prototype,"saveEatingNode"),l.prototype),i(l.prototype,"updateEatingNode",[B.action],Object.getOwnPropertyDescriptor(l.prototype,"updateEatingNode"),l.prototype),i(l.prototype,"saveCommunicateNode",[B.action],Object.getOwnPropertyDescriptor(l.prototype,"saveCommunicateNode"),l.prototype),i(l.prototype,"updateCommunicateNode",[B.action],Object.getOwnPropertyDescriptor(l.prototype,"updateCommunicateNode"),l.prototype),i(l.prototype,"saveOtherNode",[B.action],Object.getOwnPropertyDescriptor(l.prototype,"saveOtherNode"),l.prototype),i(l.prototype,"updateOtherNode",[B.action],Object.getOwnPropertyDescriptor(l.prototype,"updateOtherNode"),l.prototype),f=i(l.prototype,"getBillTypeData",[B.observable],{enumerable:!0,initializer:function(){return[]}}),y=i(l.prototype,"BillTypeDataItem",[B.observable],{enumerable:!0,initializer:function(){return{}}}),i(l.prototype,"getBillType",[B.action],Object.getOwnPropertyDescriptor(l.prototype,"getBillType"),l.prototype),m=i(l.prototype,"getLoanBillItemInformationData",[B.observable],{enumerable:!0,initializer:function(){return[]}}),b=i(l.prototype,"getLoanBillItemOtherInformation",[B.observable],{enumerable:!0,initializer:function(){return{}}}),i(l.prototype,"getLoanBillItemInformation",[B.action],Object.getOwnPropertyDescriptor(l.prototype,"getLoanBillItemInformation"),l.prototype),h=i(l.prototype,"getNodesByDateWithTemplatePkData",[B.observable],{enumerable:!0,initializer:function(){return[]}}),i(l.prototype,"getNodesByDateWithTemplatePk",[B.action],Object.getOwnPropertyDescriptor(l.prototype,"getNodesByDateWithTemplatePk"),l.prototype),g=i(l.prototype,"ExpenseKeyData",[B.observable],{enumerable:!0,initializer:function(){return""}}),i(l.prototype,"getSaveExpenseKey",[B.action],Object.getOwnPropertyDescriptor(l.prototype,"getSaveExpenseKey"),l.prototype),v=i(l.prototype,"checkStandardData",[B.observable],{enumerable:!0,initializer:function(){return[]}}),i(l.prototype,"checkStandard",[B.action],Object.getOwnPropertyDescriptor(l.prototype,"checkStandard"),l.prototype),i(l.prototype,"saveNodeExpense1",[B.action],Object.getOwnPropertyDescriptor(l.prototype,"saveNodeExpense1"),l.prototype),_=i(l.prototype,"UserBankData",[B.observable],{enumerable:!0,initializer:function(){return{}}}),i(l.prototype,"getUserBank",[B.action],Object.getOwnPropertyDescriptor(l.prototype,"getUserBank"),l.prototype),w=i(l.prototype,"UserInfoData",[B.observable],{enumerable:!0,initializer:function(){return[]}}),i(l.prototype,"getUserInfo",[B.action],Object.getOwnPropertyDescriptor(l.prototype,"getUserInfo"),l.prototype),S=i(l.prototype,"BillTableColumn",[B.observable],{enumerable:!0,initializer:function(){return{travel:[{type:"string",id:"travelWay",label:"交通工具"},{type:"string",id:"fromCity_toCity",label:"路线"},{type:"string",id:"date_",label:"日期"},{type:"double",id:"money",label:"金额",formatter:{format:"0,0.00"}},{type:"string",id:"tagContent",label:"标签"},{type:"enum",id:"category",label:"来源",data:[{key:"ctrip_aircraft",value:"携程机票"},{key:"ctrip_aircraft_c",value:"携程机票"},{key:"ctrip_train",value:"携程火车票"},{key:"ctrip_train_c",value:"携程火车票"},{key:"mt_train",value:"美团火车票"},{key:"mt_train_c",value:"美团火车票"},{key:"dd_person_pay",value:"滴滴"},{key:"dd_company_pay",value:"滴滴"},{key:"sq_company_pay",value:"首汽"},{key:"sq_person_pay",value:"首汽"}]},{type:"enum",id:"category",label:"企业支付",data:[{key:"ctrip_aircraft",value:"N"},{key:"ctrip_aircraft_c",value:"Y"},{key:"ctrip_train",value:"N"},{key:"ctrip_train_c",value:"Y"},{key:"mt_train",value:"N"},{key:"mt_train_c",value:"Y"},{key:"dd_person_pay",value:"N"},{key:"dd_company_pay",value:"Y"},{key:"sq_company_pay",value:"Y"},{key:"sq_person_pay",value:"N"}]}],hotel:[{type:"string",id:"city",label:"地点"},{type:"string",id:"hotel",label:"酒店名称"},{type:"string",id:"startDate_endDate",label:"住宿日期"},{type:"double",id:"money",label:"金额",formatter:{format:"0,0.00"}},{type:"string",id:"tagContent",label:"标签"},{type:"enum",id:"category",label:"来源",data:[{key:"ctrip_inn",value:"携程酒店"},{key:"ctrip_inn_c",value:"携程酒店"}]},{type:"enum",id:"category",label:"企业支付",data:[{key:"ctrip_inn",value:"N"},{key:"ctrip_inn_c",value:"Y"}]}],eating:[{type:"string",id:"company",label:"餐饮公司"},{type:"string",id:"personNum",label:"人数"},{type:"string",id:"date_",label:"日期"},{type:"double",id:"money",label:"金额",formatter:{format:"0,0.00"}},{type:"string",id:"tagContent",label:"标签"},{type:"enum",id:"category",label:"来源",data:[{key:"red_fire",value:"红火台"},{key:"red_fire_c",value:"红火台"}]},{type:"enum",id:"category",label:"企业支付",data:[{key:"red_fire",value:"N"},{key:"red_fire_c",value:"Y"}]}],buy:[{type:"double",id:"money",label:"金额",formatter:{format:"0,0.00"}},{type:"string",id:"tagContent",label:"标签"}],pay:[{type:"sting",id:"payee",label:"收款单位"},{type:"sting",id:"payWay",label:"付款方式"},{type:"sting",id:"money",label:"金额",formatter:{format:"0,0.00"}},{type:"sting",id:"payDate_",label:"付款日期"},{type:"string",id:"tagContent",label:"标签"}],gather:[{type:"double",id:"money",label:"金额",formatter:{format:"0,0.00"}},{type:"string",id:"tagContent",label:"标签"}],sale:[{type:"double",id:"money",label:"金额",formatter:{format:"0,0.00"}},{type:"string",id:"tagContent",label:"标签"}],communicate:[{type:"string",id:"communicateType",label:"通信类型"},{type:"string",id:"phoneNumber",label:"电话号码"},{type:"string",id:"communicateDate_",label:"费用期间"},{type:"double",id:"money",label:"金额",formatter:{format:"0,0.00"}},{type:"string",id:"tagContent",label:"标签"},{type:"enum",id:"category",label:"来源",data:[{key:"einvoice",value:"电子发票"}]},{type:"enum",id:"category",label:"企业支付",data:[{key:"einvoice",value:"N"}]}],other:[{type:"string",id:"note",label:"说明"},{type:"string",id:"date_",label:"日期"},{type:"double",id:"money",label:"金额",formatter:{format:"0,0.00"}},{type:"string",id:"tagContent",label:"标签"}]}}}),E=i(l.prototype,"queryExpenseInfoData",[B.observable],{enumerable:!0,initializer:function(){return{}}}),T=i(l.prototype,"queryExpenseInfoDataInformation",[B.observable],{enumerable:!0,initializer:function(){return[]}}),i(l.prototype,"queryExpenseInfo",[B.action],Object.getOwnPropertyDescriptor(l.prototype,"queryExpenseInfo"),l.prototype),O=i(l.prototype,"getLoanBillTable",[B.observable],{enumerable:!0,initializer:function(){return{}}}),D=i(l.prototype,"getLoanBillModal",[B.observable],{enumerable:!0,initializer:function(){return[]}}),k=i(l.prototype,"getTableHead",[B.observable],{enumerable:!0,initializer:function(){return{}}}),i(l.prototype,"loadLoanBillBodyTemplateInfo",[B.action],Object.getOwnPropertyDescriptor(l.prototype,"loadLoanBillBodyTemplateInfo"),l.prototype),j=i(l.prototype,"getLoanBodyData",[B.observable],{enumerable:!0,initializer:function(){return[]}}),N=i(l.prototype,"getLoanInformation",[B.observable],{enumerable:!0,initializer:function(){return[]}}),I=i(l.prototype,"getLoanOtherInformation",[B.observable],{enumerable:!0,initializer:function(){return[]}}),i(l.prototype,"getLoanBillNode",[B.action],Object.getOwnPropertyDescriptor(l.prototype,"getLoanBillNode"),l.prototype),P=i(l.prototype,"getRowsDetail",[B.observable],{enumerable:!0,initializer:function(){return[]}}),i(l.prototype,"getLoanBillBodyInfo",[B.action],Object.getOwnPropertyDescriptor(l.prototype,"getLoanBillBodyInfo"),l.prototype),i(l.prototype,"saveLoanBillNode",[B.action],Object.getOwnPropertyDescriptor(l.prototype,"saveLoanBillNode"),l.prototype),l);t.default=q},395:function(e,t,o){o(396),e.exports=self.fetch.bind(self)},396:function(e,t){!function(e){"use strict";function t(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function o(e){return"string"!=typeof e&&(e=String(e)),e}function r(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return h.iterable&&(t[Symbol.iterator]=function(){return t}),t}function a(e){this.map={},e instanceof a?e.forEach(function(e,t){this.append(t,e)},this):Array.isArray(e)?e.forEach(function(e){this.append(e[0],e[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function n(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function i(e){return new Promise(function(t,o){e.onload=function(){t(e.result)},e.onerror=function(){o(e.error)}})}function l(e){var t=new FileReader,o=i(t);return t.readAsArrayBuffer(e),o}function s(e){var t=new FileReader,o=i(t);return t.readAsText(e),o}function u(e){for(var t=new Uint8Array(e),o=new Array(t.length),r=0;r<t.length;r++)o[r]=String.fromCharCode(t[r]);return o.join("")}function p(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function c(){return this.bodyUsed=!1,this._initBody=function(e){if(this._bodyInit=e,e)if("string"==typeof e)this._bodyText=e;else if(h.blob&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(h.formData&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(h.searchParams&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else if(h.arrayBuffer&&h.blob&&v(e))this._bodyArrayBuffer=p(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!h.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(e)&&!_(e))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=p(e)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):h.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},h.blob&&(this.blob=function(){var e=n(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?n(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(l)}),this.text=function(){var e=n(this);if(e)return e;if(this._bodyBlob)return s(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(u(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},h.formData&&(this.formData=function(){return this.text().then(y)}),this.json=function(){return this.text().then(JSON.parse)},this}function d(e){var t=e.toUpperCase();return w.indexOf(t)>-1?t:e}function f(e,t){t=t||{};var o=t.body;if(e instanceof f){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new a(e.headers)),this.method=e.method,this.mode=e.mode,o||null==e._bodyInit||(o=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"omit",!t.headers&&this.headers||(this.headers=new a(t.headers)),this.method=d(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&o)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(o)}function y(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var o=e.split("="),r=o.shift().replace(/\+/g," "),a=o.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(a))}}),t}function m(e){var t=new a;return e.split(/\r?\n/).forEach(function(e){var o=e.split(":"),r=o.shift().trim();if(r){var a=o.join(":").trim();t.append(r,a)}}),t}function b(e,t){t||(t={}),this.type="default",this.status="status"in t?t.status:200,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new a(t.headers),this.url=t.url||"",this._initBody(e)}if(!e.fetch){var h={searchParams:"URLSearchParams"in e,iterable:"Symbol"in e&&"iterator"in Symbol,blob:"FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in e,arrayBuffer:"ArrayBuffer"in e};if(h.arrayBuffer)var g=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],v=function(e){return e&&DataView.prototype.isPrototypeOf(e)},_=ArrayBuffer.isView||function(e){return e&&g.indexOf(Object.prototype.toString.call(e))>-1};a.prototype.append=function(e,r){e=t(e),r=o(r);var a=this.map[e];this.map[e]=a?a+","+r:r},a.prototype.delete=function(e){delete this.map[t(e)]},a.prototype.get=function(e){return e=t(e),this.has(e)?this.map[e]:null},a.prototype.has=function(e){return this.map.hasOwnProperty(t(e))},a.prototype.set=function(e,r){this.map[t(e)]=o(r)},a.prototype.forEach=function(e,t){for(var o in this.map)this.map.hasOwnProperty(o)&&e.call(t,this.map[o],o,this)},a.prototype.keys=function(){var e=[];return this.forEach(function(t,o){e.push(o)}),r(e)},a.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),r(e)},a.prototype.entries=function(){var e=[];return this.forEach(function(t,o){e.push([o,t])}),r(e)},h.iterable&&(a.prototype[Symbol.iterator]=a.prototype.entries);var w=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];f.prototype.clone=function(){return new f(this,{body:this._bodyInit})},c.call(f.prototype),c.call(b.prototype),b.prototype.clone=function(){return new b(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new a(this.headers),url:this.url})},b.error=function(){var e=new b(null,{status:0,statusText:""});return e.type="error",e};var S=[301,302,303,307,308];b.redirect=function(e,t){if(-1===S.indexOf(t))throw new RangeError("Invalid status code");return new b(null,{status:t,headers:{location:e}})},e.Headers=a,e.Request=f,e.Response=b,e.fetch=function(e,t){return new Promise(function(o,r){var a=new f(e,t),n=new XMLHttpRequest;n.onload=function(){var e={status:n.status,statusText:n.statusText,headers:m(n.getAllResponseHeaders()||"")};e.url="responseURL"in n?n.responseURL:e.headers.get("X-Request-URL");var t="response"in n?n.response:n.responseText;o(new b(t,e))},n.onerror=function(){r(new TypeError("Network request failed"))},n.ontimeout=function(){r(new TypeError("Network request failed"))},n.open(a.method,a.url,!0),"include"===a.credentials&&(n.withCredentials=!0),"responseType"in n&&h.blob&&(n.responseType="blob"),a.headers.forEach(function(e,t){n.setRequestHeader(t,e)}),n.send(void 0===a._bodyInit?null:a._bodyInit)})},e.fetch.polyfill=!0}}("undefined"!=typeof self?self:this)},405:function(e,t,o){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l,s=function(){function e(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,o,r){return o&&e(t.prototype,o),r&&e(t,r),t}}(),u=o(12),p=r(u),c=o(391),d=(r(c),o(136)),f=o(135),y=o(48),m=o(53),b=r(m),h=o(394),g=r(h),v=new g.default,_=(0,y.observer)(l=function(e){function t(e){a(this,t);var o=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.state={headerInfo:[],errorTips:""},o}return i(t,e),s(t,[{key:"componentWillReceiveProps",value:function(e){this.setState({headerInfo:e.headerInfo})}},{key:"referHandleChange",value:function(e,t){var o=this,r=o.props.headerInfo;r[e]=t,o.props.setStateData({headerInfo:r})}},{key:"radioInputChange",value:function(e,t){var o=this,r=o.props.headerInfo;r[e]=t,o.props.setStateData({headerInfo:r})}},{key:"inputChange",value:function(e,t){var o=this,r=o.props.headerInfo;r[e]=t.target.value,o.props.setStateData({headerInfo:r})}},{key:"inputValidate",value:function(e,t){var o=this;o.props.headerInfo[e]=t.target.value;var r=v.validateMoney(t.target.value);this.setState({errorTips:r}),o.props.setStateData({errorTips:r})}},{key:"getTime",value:function(e,t){var o=this,r=o.props.headerInfo;r[e]=t,o.props.setStateData({headerInfo:r})}},{key:"render",value:function(){var e=this,t={width:"100%",border:0,outline:"none",lineHeight:"30px"},o={border:"1px solid red",height:"35px"};return p.default.createElement("div",{className:"stdreimburse-box"},p.default.createElement("div",{className:"row"},this.props.headerInfo.map(function(r,a){return p.default.createElement("div",{key:"LoanBill"+a,className:"col-md-4 col-sm-4 col-xs-4 details-h",style:{height:"60px"}},p.default.createElement("div",{className:"details-h-t"},r.source_name),5==r.type?p.default.createElement(d.Refers,{key:Math.random(),labelKey:3==r.typeTwo?"code":"name",emptyLabel:"暂无数据",onChange:e.referHandleChange.bind(e,r.source_code),placeholder:"请选择...",referConditions:{refType:"table",refCode:1530==r.source_type||1520==r.source_type?"个人银行账户":r.dest_property_name,rootName:r.source_name,displayFields:["id","name"]},referDataUrl:b.default.webreimburse.webReferUrl,referType:"list",selected:e.props.headerInfo[r.source_code]?e.props.headerInfo[r.source_code]:[],ref:function(t){return e._myrefers=t},multiple:!1}):"",4==r.type?p.default.createElement("div",{className:"details-h-v",style:{height:"35px"}},p.default.createElement("label",null,p.default.createElement("input",{type:"radio",checked:!1===e.props.headerInfo[r.source_code],onClick:e.radioInputChange.bind(e,r.source_code,!1),value:!1})," 否")):"",3==r.type?p.default.createElement(f.DatePicker,{id:"example-datepicker",dateFormat:"YYYY-MM-DD",value:e.props.headerInfo[r.source_code]?e.props.headerInfo[r.source_code]:"",onChange:e.getTime.bind(e,r.source_code)}):"",2==r.type?"money"==r.source_code?p.default.createElement("div",{className:"details-h-v",style:e.state.errorTips?o:{height:"35px"}},p.default.createElement("label",null,p.default.createElement("input",{style:t,value:e.props.headerInfo[r.source_code]?e.props.headerInfo[r.source_code]:"",onChange:e.inputChange.bind(e,r.source_code),onKeyUp:e.inputValidate.bind(e,r.source_code)}))):p.default.createElement("div",{className:"details-h-v",style:{height:"35px"}},p.default.createElement("label",null,p.default.createElement("input",{style:t,value:e.props.headerInfo[r.source_code]?e.props.headerInfo[r.source_code]:"",onChange:e.inputChange.bind(e,r.source_code)}))):"",1==r.type||0==r.type?p.default.createElement("div",{className:"details-h-v",style:{height:"35px"}},p.default.createElement("input",{style:t,value:e.props.headerInfo[r.source_code]?e.props.headerInfo[r.source_code]:"",onChange:e.inputChange.bind(e,r.source_code),type:"text"})):"")})))}}]),t}(p.default.Component))||l;t.default=_},406:function(e,t,o){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=function(){function e(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,o,r){return o&&e(t.prototype,o),r&&e(t,r),t}}(),u=o(12),p=r(u),c=o(391),d=r(c),f=o(136),y=o(135),m=o(52),b=o(392),h=r(b),g=o(53),v=r(g),_=o(394),w=r(_),S=new w.default,E=function(e){function t(e){a(this,t);var o=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.getMoney=function(){var e=o.props.isEdit,t=o.state.tableListShow;e&&(t=o.props.tableList);var r=0;return h.default.forEach(t,function(e){r+=parseFloat(e.money)}),r},o.initGrid=function(){var e=o.props.isEdit,t=o.state.tableListShow;return e&&(t=o.props.tableList),p.default.createElement("table",{className:"table"},p.default.createElement("thead",null,p.default.createElement("tr",null,p.default.createElement("th",null),o.state.tableHead&&o.state.tableHead.name&&o.state.tableHead.name.map(function(e,t){return p.default.createElement("th",{key:"tableHead"+t},e)}),p.default.createElement("th",null))),p.default.createElement("tbody",null,t.map(function(e,t){return p.default.createElement("tr",{key:"tableList"+t},p.default.createElement("td",null,t+1),o.state.tableHead.code.map(function(t,o){return"object"==l(e[t])?p.default.createElement("td",{key:"tableMap"+t},e[t].map(function(e,o){return p.default.createElement("td",{key:"tableMap"+t},e.name)})):p.default.createElement("td",{key:"tableMap"+t},"money"==t?d.default.formatCurrency(e[t]):e[t])}),p.default.createElement("td",null,p.default.createElement("span",{onClick:o.editLoan.bind(o,e.order)},"编辑"),p.default.createElement("span",{onClick:o.deleteLoan.bind(o,e.order)},"删除")))})))},o.initModalGrid=function(){var e={width:"100%",border:0,outline:"none",lineHeight:"30px"},t={border:"1px solid red",height:"35px"};return p.default.createElement("div",{className:"row"},o.props.tableInfo.map(function(r,a){return p.default.createElement("div",{key:"LoanBill"+a,className:"col-md-4 col-sm-4 col-xs-4 details-h",style:{height:"60px"}},p.default.createElement("div",{className:"details-h-t"},"true"==r.display?p.default.createElement("span",{className:"error"},"*"):"","   ",r.source_name),5==r.type?p.default.createElement(f.Refers,{key:Math.random(),labelKey:3==r.typeTwo?"code":"name",emptyLabel:"暂无数据",onChange:o.referHandleChange.bind(o,r.source_code),placeholder:"请选择...",referConditions:{refType:"table",refCode:1530==r.source_type||1520==r.source_type?"个人银行账户":r.dest_property_name,rootName:r.source_name,displayFields:["id","name"]},referDataUrl:v.default.webreimburse.webReferUrl,referType:"list",selected:o.props.tableInfo[r.source_code]?o.props.tableInfo[r.source_code]:[],ref:function(e){return o._myrefers=e},multiple:!1}):"",4==r.type?p.default.createElement("div",{className:"details-h-v",style:{height:"35px"}},p.default.createElement("label",null,p.default.createElement("input",{type:"radio",checked:!1===o.props.tableInfo[r.source_code],onClick:o.radioInputChange.bind(o,r.source_code,!1),value:!1})," 否")):"",3==r.type?p.default.createElement(y.DatePicker,{id:"example-datepicker",dateFormat:"YYYY-MM-DD",value:o.props.tableInfo[r.source_code]?o.props.tableInfo[r.source_code]:d.default.getTime(),onChange:o.getTime.bind(o,r.source_code)}):"",2==r.type?"money"==r.source_code?p.default.createElement("div",{className:"details-h-v",style:o.state.errorModalTips?t:{height:"35px"}},p.default.createElement("label",null,p.default.createElement("input",{style:e,value:o.props.tableInfo[r.source_code]?o.props.tableInfo[r.source_code]:"",onChange:o.inputChange.bind(o,r.source_code),onKeyUp:o.inputValidate.bind(o,r.source_code)}))):p.default.createElement("div",{className:"details-h-v",style:{height:"35px"}},p.default.createElement("label",null,p.default.createElement("input",{style:e,value:o.props.tableInfo[r.source_code]?o.props.tableInfo[r.source_code]:"",onChange:o.inputChange.bind(o,r.source_code)}))):"",1==r.type||0==r.type?p.default.createElement("div",{className:"details-h-v",style:{height:"35px"}},p.default.createElement("input",{style:e,value:o.props.tableInfo[r.source_code]?o.props.tableInfo[r.source_code]:"",onChange:o.inputChange.bind(o,r.source_code),type:"text"})):"")}))},o.openModal=function(){var e=o.state.tableInfo,t=o.state.tableHead,r=o.state.tableList;h.default.forEach(t.codeAll,function(t,o){e[t]="",delete r[t]}),o.setState({tableList:r,tableInfo:e,modalErrors:[],modalShow:!0})},o.closeModal=function(){o.setState({modalErrors:[],modalShow:!1})},o.saveModal=function(){var e=o.props.isEdit,t=o.state.tableListShow;e&&(t=o.props.tableList);var r=o.state.tableInfo,a=o.state.tableHead.codeAll,n=r.order||"";if(!(o.tableMustInputTips(r).length>0)){var i={};if(h.default.forEach(a,function(e,t){i[e]=r[e]}),n){var l=h.default.findIndex(t,function(e){return e.order==n});i.order=n,t[l]=i}else i.order=(new Date).getTime(),t.push(i);o.setState({modalErrors:[],modalShow:!1,tableListShow:t},function(){o.props.setStateData({tableList:t})})}},o.deleteLoan=function(e){var t=o.props.isEdit,r=o.state.tableListShow;t&&(r=o.props.tableList);for(var a=0;a<r.length;a++)if(r[a].order==e){r.splice(a,1);break}o.setState({tableListShow:r},function(){o.props.setStateData({tableList:r})})},o.editLoan=function(e){var t=o.props.isEdit,r=o.state.tableListShow;t&&(r=o.props.tableList);var a=o.state.tableHead.codeAll,n=o.state.tableInfo;h.default.forEach(r,function(t,o){h.default.forEach(a,function(a,i){t.order&&t.order==e&&(n.order=e,n[a]=r[o][a])})}),o.setState({tableInfo:n,modalShow:!0},function(){o.props.setStateData({tableList:r})})},o.tableMustInputTips=function(e){var t=o.state.tableHead.mustInput,r=[];return h.default.forEach(t,function(t,o){""==e[t.mustCode]&&r.push(t.mustName)}),""!=o.state.errorModalTips&&r.push("金额格式不正确或"),o.setState({modalErrors:r}),r},o.state={tableInfo:[],tableHead:[],tableList:[],tableListShow:[],modalShow:!1,saveTableList:[],modalErrors:[],errorModalTips:""},o}return i(t,e),s(t,[{key:"componentWillReceiveProps",value:function(e){this.setState({tableInfo:e.tableInfo,tableList:e.tableList,tableHead:e.tableHead})}},{key:"componentWillMount",value:function(){}},{key:"render",value:function(){return p.default.createElement("div",{style:{marginBottom:"60px"}},p.default.createElement("div",{className:"stdreimburse-box"},p.default.createElement("b",null,"明细：共",d.default.formatCurrency(this.getMoney())),p.default.createElement("button",{type:"button",onClick:this.openModal,className:"btn btn-primary fr"},"新增")),p.default.createElement("div",{className:this.state.tableListShow.length>0||this.props.isEdit?"details_table":"hide"},p.default.createElement("div",{className:"standard-grid"},this.initGrid())),p.default.createElement(m.Modal,{show:this.state.modalShow,onHide:this.closeModal,className:"static-modal"},p.default.createElement(m.Modal.Header,{closeButton:!0},p.default.createElement(m.Modal.Title,null,"填写借款单")),p.default.createElement(m.Modal.Body,{style:{overflow:"auto"}},this.initModalGrid(),p.default.createElement("span",{className:this.state.modalErrors.length>0?"error":"hide"},this.state.modalErrors.map(function(e,t){return 0==t?e:"、"+e}),"不可为空")),p.default.createElement(m.Modal.Footer,null,p.default.createElement(m.Button,{onClick:this.closeModal},"取消"),p.default.createElement(m.Button,{onClick:this.saveModal,bsStyle:"primary"},"确定"))))}},{key:"referHandleChange",value:function(e,t){var o=this.props.tableInfo;o[e]=t,this.props.setStateData({tableInfo:o})}},{key:"radioInputChange",value:function(e,t){var o=this.props.tableInfo;o[e]=t,this.props.setStateData({tableInfo:o})}},{key:"inputChange",value:function(e,t){var o=this.props.tableInfo,r=t.target.value;o[e]=r,this.props.setStateData({tableInfo:o})}},{key:"inputValidate",value:function(e,t){this.props.tableInfo[e]=t.target.value;var o=S.validateMoney(t.target.value);this.setState({errorModalTips:o})}},{key:"getTime",value:function(e,t){var o=this.props.tableInfo;o[e]=t,this.props.setStateData({tableInfo:o})}}]),t}(p.default.Component);t.default=E}});